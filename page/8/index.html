<!doctype html>
<html class="theme-next use-motion ">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="一只在迈向机器学习道路上狂奔的程序猿." />



  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="一只在迈向机器学习道路上狂奔的程序猿.">
<meta property="og:type" content="website">
<meta property="og:title" content="DannyLee">
<meta property="og:url" content="http://dannylee1991.github.io/page/8/index.html">
<meta property="og:site_name" content="DannyLee">
<meta property="og:description" content="一只在迈向机器学习道路上狂奔的程序猿.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DannyLee">
<meta name="twitter:description" content="一只在迈向机器学习道路上狂奔的程序猿.">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'post'
  };
</script>

<!--baidu统计-->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?2f967e5ec4f276411160d27aeace7722";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

  <title> DannyLee </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  



  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">DannyLee</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            标签
          </a>
        </li>
      

      
      
        <li class="menu-item menu-item-search">
          <a href="#" class="st-search-show-outputs">
            <i class="menu-item-icon icon-next-search"></i> <br />
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'ss9-_Hsd4DyhyGw4m99P','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/07/11/gradle学习笔记-多项目构建介绍/" itemprop="url">
                gradle学习笔记-多项目构建介绍
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-07-11T23:06:55+08:00" content="2016-07-11">
            2016-07-11
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/gradle/" itemprop="url" rel="index">
                  <span itemprop="name">gradle</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/07/11/gradle学习笔记-多项目构建介绍/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/11/gradle学习笔记-多项目构建介绍/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>只有小规模的项目具有单一的构建文件和源码，除非恰好是一个大规模的整体的应用。项目被分割成更小的、相互依赖的模块，往往会更容易理解和处理。“相互依赖”这个词很重要，因此，这就是为什么你通常希望通过一个单一的构建将多个模块链接起来。</p>
<p>gradle通过<strong>多项目构建(multi-project)</strong>来支持这种需求。</p>
<h2 id="1-多项目构建的结构">1.多项目构建的结构</h2><p>这种构建引入了各种各样的子项目，但它们都有共同的特点：</p>
<ul>
<li>在项目的根目录都有一个<code>settings.gradle</code>文件</li>
<li>在根目录或主目录下都有一个<code>build.gradle</code>文件</li>
<li>每个字目录都有他们自己的<code>*.gradle</code>文件（有些多项目构建结构也许会胜率子项目的构建脚本）</li>
</ul>
<p><code>settings.gradle</code>告诉gradle主项目和子项目的结构是怎样的。幸运的是，你其实不必通过读这个文件来了解项目的结构是怎样，如果你想要了解项目结构的话，通过运行命令<code>gradle projects</code>就可以了。下面是一个在<strong>多项目(multiproject)</strong>下使用命令的例子：</p>
<p><strong>列出一次构建中的项目</strong></p>
<p>gradle -q projects</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&gt; gradle -q projects</div><div class="line"></div><div class="line">------------------------------------------------------------</div><div class="line">Root <span class="keyword">project</span></div><div class="line">------------------------------------------------------------</div><div class="line"></div><div class="line">Root <span class="keyword">project</span> <span class="string">'multiproject'</span></div><div class="line">+--- <span class="keyword">Project</span> <span class="string">':api'</span></div><div class="line">+--- <span class="keyword">Project</span> <span class="string">':services'</span></div><div class="line">|    +--- <span class="keyword">Project</span> <span class="string">':services:shared'</span></div><div class="line">|    \--- <span class="keyword">Project</span> <span class="string">':services:webservice'</span></div><div class="line">\--- <span class="keyword">Project</span> <span class="string">':shared'</span></div><div class="line"></div><div class="line">To see a list of the tasks of a <span class="keyword">project</span>, run gradle &lt;<span class="keyword">project</span>-path&gt;:tasks</div><div class="line"><span class="keyword">For</span> example, <span class="keyword">try</span> running gradle :api:tasks</div></pre></td></tr></table></figure>
<p>输出结果会告诉你，这个多项目构建有三个直接的子项目：<strong>api</strong>，<strong>services</strong>和<strong>shared</strong>。其中<strong>services</strong>还有属于它的子项目:<strong>shared</strong>和<strong>webservice</strong>。通过这个目录结构图，我们可以很容易的找到任意一个其中的项目。例如：你可以通过这张图中发现<strong>webservice</strong>位于<code>&lt;root&gt;/services/webservice.</code>这个位置。</p>
<p>默认情况下，gradle使用<code>settings.gradle</code>文件的目录名来作为根项目的名称。这样做通常不会有什么问题，因为所有的开发者会在同一个项目中检出相同的目录名。在持续集成服务器上，例如Jenkins，目录名称可能会是自动生成的并且与你的版本控制工具中的名字并不匹配。因此，建议你设置一个可预测的项目名称，即使是一个单一构建的项目。你可以通过设置<code>rootProject.name</code>来配置根项目名。</p>
<p>每个项目都有属于它们自己的构建文件，但这并不是必须的。在上面的例子中，<strong>services</strong>项目仅仅是其他子项目的一个容器或者说是分组。在它相应的目录中没有构建文件。然而，多构建项目的根项目都有这个构建文件。</p>
<p>根项目的<code>build.gradle</code>通常会和子项目共享配置，例如主项目会和子项目共享自己的插件和依赖项。当所有的配置都在同一个地方，也可以通过配置这一处来达到配置所有子项目的效果。这意味着，当你发现某个子项目被配置了某个属性，你通常应该先经常检查根项目的构建文件。</p>
<p>另外一个需要被牢记的是构建配置的文件可能并不叫<code>build.gradle</code>。许多项目都会以子项目的名称来命名构建文件，例如之前例子中的<code>api.gradle</code>和<code>services.gradle</code>。在使用IDE时，这种做法有很大的好处，因为很难从几十个<code>build.gradle</code>文件中找出你要的具体是哪一个。对于<code>settings.gradle</code>文件的处理有一点小小的特殊，但对于一次构建，你不需要了解它是怎么做到这样的。只需要看一看子项目目录，去找一下以<code>.gradle</code>结尾的文件就行了。</p>
<p>一旦你知道子项目中能用到的是什么，那么关键的问题就是构建者如何在项目中执行这些task。</p>
<h2 id="2-执行一个多项目构建">2.执行一个多项目构建</h2><p>从用户的角度去看，多项目构建任然是一系列可以用来运行的task。这不同于你想控制哪一个项目的task的执行。这里你有两条选项：</p>
<ul>
<li>改变子项目对应的目录到你想要的地方，然后正常的执行<code>gradle &lt;task&gt;</code>。</li>
<li>在任意目录下都使用一个符合标准的task的名称，尽管这通常是从根目录开始的。例如：<code>gradle :services:webservice:build</code>将执行<strong><code>webservice</code></strong>这个子项目以及它所依赖的所有子项目。</li>
</ul>
<p>第一种方法是类似于单项目的使用情况，但在多项目的gradle构建时略有不同。命令<code>gradle test</code>会执行相对于当前工作目录的所有子项目中的test task，前提是如果这些子项目中有这个名为<code>test</code>的task。因此，如果你在根项目的目录下运行命令，你也会在<strong>api</strong>, <strong>shared</strong>, <strong>services:shared</strong> 和<strong>services:webservice</strong>下运行test这个task。如果你仅仅在<strong>services</strong>这个项目下运行这个命令，那么只有<strong> services:shared</strong>和<strong>services:webservice</strong>这两个项目会执行test的task。</p>
<p>为了能更多的控制执行，可以使用符合标准的名字（上面提到的第二种方法）。这些路径类似于目录路径，但需要使用”:”而不是”/“或”\”。如果路径是以”:”开头的，那么路径会以根项目为相对路径去解析。换句话说，开头的”:”代表根项目本身。所有其他的冒号都是路径分隔符。</p>
<p>这种方法适用于任何task，所以，如果你想知道在一个特定的子项目的task是什么，只需使用类似这种方式：<code>gradle :services:webservice:tasks</code>。</p>
<p>无论你使用哪种方式来执行task，gradle都能处理好当前依赖的任何子项目的构建。你不用担心项目间依赖问题。如果你对它们是如何配置的感兴趣，你可以阅读写多项目构建的文档<a href="https://docs.gradle.org/current/userguide/multi_project_builds.html" target="_blank" rel="external">later in the user guide</a>。</p>
<p>还有最后一件事要注意。当你使用gradle wrapper时，第一种方式不能很好的工作，因为如果你不在项目的根目录，你必须对你的wrapper脚本指定路径。举个例子：如果你在<strong>webservice</strong>这个子项目中，你必须执行<code>../../gradlew build</code></p>
<p>这就是构建者关于多项目构建需要了解的全部。现在你可以辨别一个构建是否是一个多项目构建项目，并且可以观察它的结构。最终你可以执行指定的子项目的task。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/07/11/gradle学习笔记-依赖管理基础/" itemprop="url">
                gradle学习笔记-依赖管理基础
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-07-11T15:06:55+08:00" content="2016-07-11">
            2016-07-11
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/gradle/" itemprop="url" rel="index">
                  <span itemprop="name">gradle</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/07/11/gradle学习笔记-依赖管理基础/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/11/gradle学习笔记-依赖管理基础/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>这一节将介绍一些gradle中依赖管理的基本知识。</p>
<h2 id="1-什么是依赖管理？">1.什么是依赖管理？</h2><p>粗略的说，依赖管理是由两个部分组成的。首先，gradle需要知道你的项目需要执行的一些构建和一些运行的信息，通过这些信息可以找到它们。我们称这些传入的文件为项目的<strong>依赖（dependencies）</strong>。第二，Gradle需要构建和上传您的项目产生的东西。我们把这些传出的文件称为项目的<strong>出版物（publications）</strong>。让我们更详细地看一下这两部分：</p>
<p>大多数项目并不是完全独立的。它们需要其他项目构建的文件以便于被编译或测试，等。例如，为了在我的项目中使用Hibernate,我需要在编译我的源代码时引入一些Hibernate的jar包到classpath中。为了运行我的测试，我也许需要引入一些额外的jar包到test的classpath中，例如一个特定的JDBC驱动，或者Ehcache jar包。</p>
<p>这些传入的文件形成了项目的依赖关系。gradle允许你告诉它你的项目依赖是怎样的，这样以来它可以照顾好你的项目依赖关系，并且在你的构建中也是可以生效的。依赖可能需要从远程仓库Maven、lvy下载到本地，或者也有可能存在于本地目录，或者也许是同一个多项目构建的项目中的一个其他项目。我们称这个过程为<strong>依赖解析(dependency resolution)</strong>。</p>
<p>请注意，这里提到的这个主要功能的优势超越了Ant。用Ant时，你只能通过指定jar包加载的绝对路径或相对路径。然而在使用gradle时，你只需要简单的声明依赖的“名字”，以及指定其他层是从哪里获得这些依赖的即可。你可以通过在Ant上添加Apache lvy来简化这些操作，但gradle会处理的更好。</p>
<p>通常，一个项目的依赖，其自身也存在依赖。例如，Hibernate内核需要添加几个其他的库到classpath中，才能正常运行。因此，当gradle在你的项目中运行测试，也需要去找到它的依赖项并且确保它们是可用的。我们称这种为<strong>过渡依赖(transitive dependencies)</strong>。</p>
<p>很多项目就是为了让外部项目来使用的。例如，如果你的项目提供一个java库，你需要构建一个jar包，并且可能是源码jar以及一些文档，并将它们发布到某个地方。</p>
<p>这些发出来的文件形成了这些项目的出版物。gradle也会做好这些工作的。你声明你的项目的出版物，然后gradle会负责构建并将它们发布到某个地方。究竟“发布（publishing）”是什么意思，取决于你具体想怎么做。也许你只是想从本地目录拷贝文件，或者上传它们到一个远端的Maven或lvy仓库，或者你使用的文件是当前项目中多个子项目中的另一个子项目中的。我们称这种行为是<strong>发布(publishing)</strong>。</p>
<h2 id="2-声明你的依赖">2.声明你的依赖</h2><p>让我们来看看一些依赖的声明。这是一个基本构建脚本：</p>
<p><strong>声明依赖</strong></p>
<p>build.gradle</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">apply <span class="string">plugin:</span> <span class="string">'java'</span></div><div class="line"></div><div class="line">repositories &#123;</div><div class="line">    mavenCentral()</div><div class="line">&#125;</div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">    compile <span class="string">group:</span> <span class="string">'org.hibernate'</span>, <span class="string">name:</span> <span class="string">'hibernate-core'</span>, <span class="string">version:</span> <span class="string">'3.6.7.Final'</span></div><div class="line">    testCompile <span class="string">group:</span> <span class="string">'junit'</span>, <span class="string">name:</span> <span class="string">'junit'</span>, <span class="string">version:</span> <span class="string">'4.+'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这些是什么呢？这些构建脚本描述了一些项目的事情。首先，规定了编译项目源码需要用到版本为“3.6.7.Final”的Hibernate core。言外之意，Hibernate core和它自身的依赖项也将在运行时被使用到。这个构建脚本也指出编译项目的测试，需要任意版本&gt;=4.0的junit。这也是再告诉gradle去看看Maven中央仓库里是否有其他的依赖被用到。下面我们详细来介绍一下。</p>
<h2 id="3-依赖配置">3.依赖配置</h2><p>在gradle中依赖是在设置中分组配置的。一个配置是一个被命名的一系列依赖项。我们把它们称为依赖配置。您可以使用它们来声明项目的外部依赖关系。我们稍后也会看到，他们会被用来申报你的项目的publications。</p>
<p>java插件定义了大量的标准配置。这些配置表示java插件使用到的classpath。一些已经列在下面，你可以在<a href="https://docs.gradle.org/current/userguide/java_plugin.html#tab:configurations" target="_blank" rel="external">Table 45.5, “Java plugin - dependency configurations”</a>看到更多的详细信息。</p>
<ul>
<li><p><strong>compile</strong></p>
<p>  编译项目所需要的依赖</p>
</li>
<li><p><strong>runtime</strong></p>
<p>  项目运行所需要的依赖。默认情况下，也包含编译时的依赖。</p>
</li>
<li><p><strong>testCompile</strong></p>
<p>  项目测试是所需要的依赖。默认情况下，也包含已编译的项目的类和编译时依赖。</p>
</li>
<li><p><strong>testRuntime</strong></p>
<p>  运行测试所需的依赖关系。默认情况下，包含编译、运行时和测试编译所需要的依赖。</p>
</li>
</ul>
<p>各种插件添加更多的配置。你也可以在你的构建中使用自定义配置。关于定义和定制依赖的设置，详情请见<a href="https://docs.gradle.org/current/userguide/dependency_management.html#sub:configurations" target="_blank" rel="external">Section 23.3, “Dependency configurations</a></p>
<h2 id="4-外部依赖">4.外部依赖</h2><p>你可以声明各种各样的依赖类型。一类是<strong>外部依赖(external dependency)</strong>。这是一些依赖于非当前构建的外部文件，这些文件存储在某个外部库中，如Maven中央仓库、公司级Maven、lvy库，或本地的目录。</p>
<p>如果要定义一个外部依赖关系，您需要将它添加到依赖配置中：</p>
<p><strong>外部依赖的定义</strong></p>
<p>build.gradle</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">dependencies</span> &#123;    compile <span class="attribute">group</span>:<span class="string">'org.hibernate'</span>, <span class="attribute">name</span>:<span class="string">'hibernate-core'</span>, <span class="attribute">version</span>:<span class="string">'3.6.7.Final'</span>&#125;</div></pre></td></tr></table></figure>
<p>一个外部依赖是通过组名，库名，以及版本号来唯一标示的。其中组名和版本号是可选的。</p>
<p>也可以使用类似于：<code>&quot;group:name:version&quot;</code>的简写形式。</p>
<p><strong>外部依赖定义的简写形式</strong></p>
<p>build.gradle</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">dependencies</span> &#123;    <span class="keyword">compile</span><span class="string">'org.hibernate:hibernate-core:3.6.7.Final'</span>&#125;</div></pre></td></tr></table></figure>
<p>更多关于依赖的定义和使用，见<a href="https://docs.gradle.org/current/userguide/dependency_management.html#sec:how_to_declare_your_dependencies" target="_blank" rel="external">Section 23.4, “How to declare your dependencies”</a>。</p>
<h2 id="5-仓库">5.仓库</h2><p>gradle是如何找到外部依赖的文件的呢？gradle通过在一个<strong>仓库repository</strong>中寻找这些文件。一个仓库其实就是一个通过组名，文件名和版本号标识的文件集合。gradle能理解几种不同的仓库格式，例如Maven，lvy，以及几种不同的方式访问仓库，如本地文件系统或者http。</p>
<p>默认情况下，gradle并没有定义任何仓库。在你使用外部依赖之前你需要定义至少一个仓库。一种可选的方案是使用Maven中央仓库：</p>
<p><strong>使用Maven中央仓库</strong></p>
<p>build.gradle</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class">repositories </span>&#123;</div><div class="line">    mavenCentral()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或者是JCenter</p>
<p><strong>使用JCenter仓库</strong></p>
<p>build.gradle</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class">repositories </span>&#123;</div><div class="line">    jcenter()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或者其他任何一个远程Maven仓库：</p>
<p><strong>使用一个远程Maven仓库</strong></p>
<p>build.gradle</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="section">repositories</span> &#123;</div><div class="line">    <span class="section">maven</span> &#123;</div><div class="line">        <span class="attribute">url</span> <span class="string">"http://repo.mycompany.com/maven2"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或者使用一个lvy仓库：</p>
<p><strong>使用一个远程lvy地址</strong></p>
<p>build.gradle</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="section">repositories</span> &#123;</div><div class="line">    <span class="section">ivy</span> &#123;</div><div class="line">        <span class="attribute">url</span> <span class="string">"http://repo.mycompany.com/repo"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>你也可以通过本地文件系统构建仓库。这对于Maven和lvy都适用。</p>
<p><strong>使用本地lvy地址</strong></p>
<p>build.gradle</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class">repositories </span>&#123;</div><div class="line">    <span class="class">ivy </span>&#123;</div><div class="line">        <span class="comment">// URL can refer to a local directory</span></div><div class="line">        url <span class="string">"../local-repo"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>一个项目可以有多个仓库。gradle会按照仓库的声明顺序在每一个仓库中去寻找指定的依赖，当第一次找到的时，就停止搜索。</p>
<p>更多关于仓库的声明和使用，见<a href="https://docs.gradle.org/current/userguide/dependency_management.html#sec:repositories" target="_blank" rel="external">Section 23.6, “Repositories”</a>。</p>
<h2 id="6-发布工件">6.发布工件</h2><p>依赖配置同样也可以被用来发布文件。我们称这些文件为<strong>发布工件publication artifacts</strong>，或者仅仅是<strong>工件artifacts</strong>。</p>
<p>插件很好的完成了定义一个项目的工件的工作，因此你不需要做任何特殊的事情来告诉gradle需要发布什么。<br>但是，你需要告诉gradle这些工件要发布到哪里。你需要通过uploadArchives task来将你的项目附加到某个库上。下面是一个发布到远端lvy仓库的例子：</p>
<p><strong>发布到一个远端lvy仓库</strong></p>
<p>build.gradle</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="section">uploadArchives</span> &#123;</div><div class="line">    <span class="section">repositories</span> &#123;</div><div class="line">        <span class="section">ivy</span> &#123;</div><div class="line">            <span class="section">credentials</span> &#123;</div><div class="line">                <span class="attribute">username</span> <span class="string">"username"</span></div><div class="line">                password <span class="string">"pw"</span></div><div class="line">            &#125;</div><div class="line">            url <span class="string">"http://repo.mycompany.com"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>现在，当你运行<code>gradle uploadArchives</code>时，gradle就开始构建并上传jar包了。同时gradle也会生成一个<code>ivy.xml</code>并上传到仓库中。</p>
<p>你也可以上传到Maven仓库中。语法有一些不一样。<strong>注意</strong>你需要使用Maven插件来支持上传到Maven仓库的操作。在这种情况下，gradle会生成一个<code>pom.xml</code>文件，并上传到Maven仓库中。</p>
<p><strong>发布到一个Maven仓库</strong></p>
<p>build.gradle</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'maven'</span></div><div class="line"></div><div class="line">uploadArchives &#123;</div><div class="line">    repositories &#123;</div><div class="line">        mavenDeployer &#123;</div><div class="line">            repository(url: <span class="string">"file://localhost/tmp/myRepo/"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>更多关于发布的信息，请看<a href="https://docs.gradle.org/current/userguide/artifact_management.html" target="_blank" rel="external">Chapter 30, Publishing artifacts</a>。</p>
<h2 id="7-下一步去哪？">7.下一步去哪？</h2><p>关于的依赖解析的全部详情，见<a href="https://docs.gradle.org/current/userguide/dependency_management.html" target="_blank" rel="external">Chapter 23, Dependency Management</a>，关于发布工件的详情见<a href="https://docs.gradle.org/current/userguide/artifact_management.html" target="_blank" rel="external">Chapter 30, Publishing artifacts</a>。</p>
<p>如果你对上述的DSL元素感兴趣，请看<a href="https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:configurations(groovy.lang.Closure" target="_blank" rel="external">Project.configurations{}</a>)，<a href="https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:repositories(groovy.lang.Closure" target="_blank" rel="external">Project.repositories{}</a>)和<a href="https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:dependencies(groovy.lang.Closure" target="_blank" rel="external">Project.dependencies{}</a>)。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/07/10/gradle学习笔记-Gradle 守护进程/" itemprop="url">
                gradle学习笔记-Gradle 守护进程
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-07-10T21:06:55+08:00" content="2016-07-10">
            2016-07-10
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/gradle/" itemprop="url" rel="index">
                  <span itemprop="name">gradle</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/07/10/gradle学习笔记-Gradle 守护进程/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/10/gradle学习笔记-Gradle 守护进程/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>来自维基百科：</p>
<blockquote>
<p>A daemon is a computer program that runs as a background process, rather than being under the direct control of an interactive user.<br>守护进程是一个作为计算机后台进程运行的，而不是直接可以与用户进行交互的程序。</p>
</blockquote>
<p>gradle运行在java虚拟机(JVM)中，并且需要使用几个支持库，这些都会花费不少的初始化时间。因此，有时开启的时候回有一点点慢。解决这个问题的方式就是<strong>gradle守护进程(Daemon)</strong>:一个长时间存活的后台进程，可以使得执行你的构建的速度比其他情况下更为迅速。我们通过避免昂贵的引导进程以及利用缓存，在内存中来保存你的项目数据，来达到提高构建速度的效果。通过使用守护进程执行gradle构建，与不使用守护进程，没有区别的。通过简单的配置，就可以设置是否使用守护进程–gradle中一切操作都是如此的透明。</p>
<h2 id="1-开启守护进程">1.开启守护进程</h2><p>gradle守护进程默认是不可用的，但是我们建议每一个开发者的机器上都将守护进程设置为开启状态（除了持续集成服务器）。以下是几种开启守护进程的方式，但最通用的一种方式是添加这样一行：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">org<span class="selector-class">.gradle</span><span class="selector-class">.daemon</span>=true</div></pre></td></tr></table></figure>
<p>到文件<code>«USER_HOME»/.gradle/gradle.properties</code>，其中<code>«USER_HOME»</code>是你的home目录。以下是几个典型的路径，取决于你的系统平台：</p>
<ul>
<li>C:\Users\<username> (Windows Vista &amp; 7+)</username></li>
<li>/Users/<username> (Mac OS X)</username></li>
<li>/home/<username> (Linux)</username></li>
</ul>
<p>如果那个文件不存在，直接通过文本编辑器创建一个即可。你可以使用另一种方式来开启（或关闭）守护进程，具体步骤可以看下面的FAQ部分。这部分还包含关于守护进程运行的更详细的信息。</p>
<p>一旦你开启了全局守护进程，你所有的构建都会充分利用到这种速度的提升。</p>
<blockquote>
<p><strong><em>关于持续集成</em></strong></p>
<p><em>目前我们建议持续集成不要使用守护进程，取而代之更为可靠方案是为每个构建分配一个新的运行时，原因是运行时是完全与之前的构建隔离的。此外，由于守护进程主要是为了减少构建的启动时间，这一点在CI服务器上并不像是在开发者的机器上那么重要。</em></p>
</blockquote>
<h2 id="2-终止一个正在运行的守护进程">2.终止一个正在运行的守护进程</h2><p>如前所述，守护进程是一个后台进程。你不必担心gradle在你的机器上创建进程，虽然每一个守护进程，在没有任何活动后3小时才会停止。在某些情况下，如果你希望明确的终止一个守护进程，使用<code>gradle --stop</code>即可。</p>
<p>这将终止所有的和当前gradle版本相同的后台进程。如果你安装了JDK，你可以通过<code>jps</code>命令来轻松的核实守护进程是否被停止了。你会看到所有正在运行的名字为“GradleDaemon”的守护进程列表。</p>
<h2 id="3-FAQ">3.FAQ</h2><h3 id="3-1有什么方法能开启守护进程呢？">3.1有什么方法能开启守护进程呢？</h3><p>这里有两种推荐的方式在一个运行环境下开启守护进程:</p>
<ul>
<li>通过环境变量:在GRADLE_OPTS的环境变量下添加标示：<code>Dorg.gradle.daemon=true</code></li>
<li>通过配置文件:添加<code>org.gradle.daemon=true</code>到<code>«GRADLE_USER_HOME»/gradle.properties</code>文件中。</li>
</ul>
<blockquote>
<p><strong>注意：</strong><code>«GRADLE_USER_HOME»</code>默认值为<code>«USER_HOME»/.gradle</code>，<code>«USER_HOME»</code>是当前用户的home目录。这个位置可以通过<code>-g</code>或<code>--gradle-user-home</code>命令来设置。同样也可以通过<code>GRADLE_USER_HOME</code>环境变量和<code>org.gradle.user.home</code>JVM系统属性来设置。</p>
</blockquote>
<p>这两种方法有相同的效果。可根据个人喜好来选择使用。大多数用户使用的是第二种方式。</p>
<p>在Windows下，这个命令会对当前用户开启守护进程：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="keyword">if</span> <span class="keyword">not</span> exist <span class="string">"%USERPROFILE%/.gradle"</span> <span class="keyword">mkdir</span> <span class="string">"%USERPROFILE%/.gradle"</span>) &amp;&amp; (echo org.gradle.daemon=true &gt;&gt; <span class="string">"%USERPROFILE%/.gradle/gradle.properties"</span>)</div></pre></td></tr></table></figure>
<p>在UNIX-like的操作系统上，下面的这个bash脚本命令将会对当前用户开启守护进程：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">touch ~<span class="regexp">/.gradle/gradle</span>.properties &amp;&amp; echo <span class="string">"org.gradle.daemon=true"</span> <span class="meta">&gt;&gt; </span>~<span class="regexp">/.gradle/gradle</span>.properties</div></pre></td></tr></table></figure>
<p>一旦守护进程通过这种方式开启了，所有的构建都将隐式的使用这个守护进程。</p>
<p>可以通过使用<code>--daemon</code>和<code>--no-daemon</code>命令，来针对个别的构建的调用，进行切换开启和关闭使用守护进程。通常情况下，更便捷的方式是对某个环境（例如某个用户账号）开启守护进程，以便于所有的构建使用守护进程，从而不再需要再记得提供<code>--daemon</code>的开关了，</p>
<h3 id="3-2_我该如何关闭守护进程呢？">3.2 我该如何关闭守护进程呢？</h3><p>gradle守护进程默认情况下是不可用的。然而，一旦启用，有时会有需要对某些项目或某些构建调用禁用的场景。</p>
<p><code>--no-daemon</code>命令可以强制指定某个构建不使用守护进程。这个很少用，但在调试某次构建，或者gradle插件时，这个将是一个很有用的方法。当考虑到构建环境时，此命令行开关具有最高的优先级。</p>
<h3 id="3-3_我该如何抑制“please_consider_using_the_Gradle_Daemon”这样的消息呢？">3.3 我该如何抑制“please consider using the Gradle Daemon”这样的消息呢？</h3><p>gradle也许会在构建建议的末尾发出一个“使用守护进程”警告 。为了避开这个警告，你可以通过上面的方式来开启守护进程，或者明确的禁用守护进程。你可以通过<code>--no-daemon</code>命令来明确的关闭守护进程，或者通过上面某种方式开启守护进程，但将<code>org.gradle.daemon</code>属性设置为false。</p>
<p>由于gradle不推荐持续集成构建使用守护进程，所以如果CI环境变量是存在的，那么Gradle不会发出这条消息。</p>
<h3 id="3-4_为什么有超过一个的守护进程在我的机器上？">3.4 为什么有超过一个的守护进程在我的机器上？</h3><p>有几种原因可以解释为什么gradle会创建一个新的守护进程，而不是使用一个已经运行。基本规则是，如果当前没有<strong>闲置</strong>的或<strong>兼容</strong>的守护进程，Gradle将可以启动一个新的守护进程。gradle会自动杀死已经闲置了超过3小时的守护进程，所以你不用担心需要手动的清理它们。</p>
<p><strong>闲置</strong>：一个空闲守护进程是指当前没有执行构建或其他工作的守护进程。</p>
<p><strong>兼容</strong>：一个兼容的守护进程是能够满足构建环境的要求的。java运行时环境是对构建环境兼容性依赖的一个方面的例子，另外一个例子是构建运行环境需要依赖的一套jvm系统参数。</p>
<p>对某些方面的构建环境的请求也许某个守护进程并不满足。如果守护进程在java7的运行环境下，但是被要求的运行环境是java8，然而守护进程并不兼容，那么另一个守护进程一定会被开启。而且，一旦jvm开始运行，java运行时的某些参数是不可以被改变的。对于一个正在运行的JVM，改变内存分配（例如:<code>-Xmx1024m</code>），默认文字的编码，默认位置等，都是不可能的。</p>
<p>“要求构建环境”通常是一些隐式的来自一些client端（例如：gradle命令行，IDE，等）并且明确的通过命令行来开关和设置。见<a href="https://docs.gradle.org/current/userguide/build_environment.html" target="_blank" rel="external">Chapter 11, The Build Environment</a>，详细介绍了如何指定并控制一个构建环境。</p>
<p>下面的JVM系统配置是不可变的。如果被要求的构建环境需要这些配置中的任何一个，并且需要的值和守护进程的JVM的属性是不一样的，那么守护进程就不兼容了。</p>
<ul>
<li>file.encoding</li>
<li>user.language</li>
<li>user.country</li>
<li>user.variant</li>
<li>java.io.tmpdir</li>
<li>javax.net.ssl.keyStore</li>
<li>javax.net.ssl.keyStorePassword</li>
<li>javax.net.ssl.keyStoreType</li>
<li>javax.net.ssl.trustStore</li>
<li>javax.net.ssl.trustStorePassword</li>
<li>javax.net.ssl.trustStoreType</li>
<li>com.sun.management.jmxremote</li>
</ul>
<p>下面的JVM属性，是被启动参数控制的，同样也是不可改变的。守护进程的环境必须完全匹配这些属性，否则就是不兼容的。</p>
<ul>
<li>The maximum heap size (i.e. the -Xmx JVM argument)</li>
<li>The minimum heap size (i.e. the -Xms JVM argument)</li>
<li>The boot classpath (i.e. the -Xbootclasspath argument)</li>
<li>The “assertion” status (i.e. the -ea argument)</li>
</ul>
<p>gradle版本要求是构建环境条件的另一方面。守护进程是被连接到一个具体的gradle运行时的。多个不同版本的gradle项目并行，也是有多个守护进程出现的原因。</p>
<h3 id="3-5_守护进程到底会消耗多少内存？我怎样才能分配更多的内存给它？">3.5 守护进程到底会消耗多少内存？我怎样才能分配更多的内存给它？</h3><p>如果请求的构建环境没有设定最大的内存大小，守护进程将使用最大1GB的内存。它将使用JVM的默认最小内存的大小。1GB对于大多数的构建来说是足够的。较大的有数以百计的子项目的构建，很多的配置，和源代码，也许才能用到1GB或许更多的内存。</p>
<p>为了增加守护进程的内存使用，可以通过设定所请求的构建环境的一些参数来达到目的。详情请见<a href="https://docs.gradle.org/current/userguide/build_environment.html" target="_blank" rel="external"> Chapter 11, The Build Environment</a></p>
<h3 id="3-6_我该如何停止守护进程？">3.6 我该如何停止守护进程？</h3><p>守护进程会在闲置超过3小时之后自动终止。如果你希望提前终止守护进程，你可以通过你的操作系统来杀死这个进程，或者通过输入gradle的<code>--stop</code>命令来终止。<code>--stop</code>命令会终止所有当前版本的gradle的守护进程。</p>
<h3 id="3-7_守护进程什么时候会出错呢？">3.7 守护进程什么时候会出错呢？</h3><p>考虑到工程已经稳定的、透明的并且默默的进入到守护进程中运行。然而守护进程可能偶尔会被损坏或耗尽。一个gradle从多个源代码中任意选取一个执行构建。然而gradle自身的设计，以及大量的通过守护进程进行过的测试，用户构建的脚本，和第三方插件会通过一些缺陷，例如内存泄漏，全局变量泛滥等问题，打破守护进程的平衡。</p>
<p>没有正确的释放资源也有可能导致守护进程（以及正常的构建）异常。当使用Windows进行读写文件后没有正常关闭文件时，对于这种现象尤为敏感。</p>
<p>gradle主动监控堆内存的使用，并且试图检测到内存泄漏的发生点，将可用的内存排出到守护进程中。当gradle查到了一个堆内存空间的问题，gradle守护进程会结束掉当前正在运行的构建，并在下次构建中重启守护进程。这种检测是默认开启的，可用通过系统属性<code>org.gradle.daemon.performance.enable-monitoring</code>设置为false来关闭。</p>
<p>如果怀疑守护进程开始变得不稳定了，那么我们可以轻松的杀死它。再次使用<code>--no-daemon</code>这个开关，可以指定一个构建不使用守护进程。通过这种方式，我们能判断守护进程是否是造成问题的罪魁祸首。</p>
<h2 id="4-什么情况下我不该使用守护进程">4.什么情况下我不该使用守护进程</h2><p>我们推荐所有的开发者的环境中都是用守护进程。但我们<strong>不建议</strong>在持续集成(Continuous Integration)和构建服务器上使用守护进程。</p>
<p>守护进程带来的快速构建，对于坐在机器前的开发人员是格外有意义的。对于持续集成构建服务来说，稳定性和可预见性，是最重要的。对每一个构建使用一个新的完全与上次构建隔离的运行时（比如进程），是一种更可靠的方案。</p>
<h2 id="5-Tools_&amp;_IDEs">5.Tools &amp; IDEs</h2><p>Gradle Tooling API（见<a href="https://docs.gradle.org/current/userguide/embedding.html" target="_blank" rel="external">Chapter 13, Embedding Gradle using the Tooling API</a>），通过其他IDE或者一些gradle整合工具来使用时，<strong>通常</strong>都会用到守护进程来执行构建。如果你通过你的IDE来使用守护进程执行构建，那么你不需要在环境中开启守护进程。</p>
<p>然而除非你已经明确指定了开启守护进程，否则你的命令行执行的构建将不使用守护进程。</p>
<h2 id="6-守护进程是如何提高gradle构建速度的？">6.守护进程是如何提高gradle构建速度的？</h2><p>gradle守护进程是一个<strong>长时间存活</strong>的构建进程。在每次构建之间的间隙，它都会等在那里，直到下次构建。显而易见，多次构建中只加载一次gradle到内存中，与每次构建都加载一次相比，是有很大的好处的。这本身是一个显著的性能优化，但它本身也不会被终止掉。</p>
<p>对于现代的JVM来说，运行时代码优化是意义重大的。例如：热区（是一种作为OpenJDK的基础，由Oracle提供支持的JVM的实现技术）会在运行时对代码进行优化。优化是渐进的，而不是瞬时的。也就是说，代码是在执行过程中逐步优化的，这意味着后面的构建可以执行的更快，这纯粹由于这个优化过程导致的。通过对热区的实验表明，5到10个构建之后，优化的效果将趋于稳定。通过守护进程进行第1次构建，和进行第10次构建，感知层面是有很大的差异的。</p>
<p>守护进程也可以更有效的在内存中缓存的构建。例如：构建所需的类（比如插件，脚本），可以在每次构建之间缓存到内存中。同样，Gradle可将构建数据比如task的输入输出文件的哈希值维持在内存缓存中，用于增量构建。</p>
<h3 id="6-1_未来更强大的功能">6.1 未来更强大的功能</h3><p>目前，守护进程通过内存缓存和JVM的优化使得构建执行的更快。在以后的gradle版本中，守护进程将变得更加智能，以及做到<strong>预先执行</strong>的效果。比如，他可以在构建脚本被编辑之后加入了新的改动或者添加必要的依赖时，假设当前脚本是用来运行的，并立刻开始下载依赖项。</p>
<p>在未来的gradle版本中，将有更多其他的方式来提高构建速度。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/07/10/gradle学习笔记-Gradle Wrapper/" itemprop="url">
                gradle学习笔记-Gradle Wrapper
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-07-10T15:06:55+08:00" content="2016-07-10">
            2016-07-10
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/gradle/" itemprop="url" rel="index">
                  <span itemprop="name">gradle</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/07/10/gradle学习笔记-Gradle Wrapper/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/10/gradle学习笔记-Gradle Wrapper/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>大多数工具都需要在使用之前安装在你的电脑上，虽然简单的安装步骤会让你觉得没什么大碍，但这其实会给用户带来负担。同样重要的是，用户是否会安装正确的版本的工具呢？如果他们正在构建一个版本比较老的项目呢？</p>
</blockquote>
<h2 id="1-通过Wrapper来执行一次构建">1.通过Wrapper来执行一次构建</h2><p>如果一个gradle项目已经设置了wrapper(我们建议所有的项目都这样做)，你可以从项目的根目录执行下列命令之一来进行构建：</p>
<ul>
<li><code>./gradlew &lt;task&gt;</code> (Unix-like系统上使用，如Linux和Mac OS X)</li>
<li><code>gradlew &lt;task&gt;</code> (在Windows上使用gradlew.bat批处理文件)</li>
</ul>
<p>每一个wrapper都绑定在一个指定版本的gradle上，所以当你第一次以一个指定版本的gradle来运行以上的命令，它将会去下载指定的gradle并且去使用它来执行构建。</p>
<p>这不仅意味着你不需要自己手动安装gradle，而且你也能确定当前构建的设计所需要的gradle版本。这使你的历史构建更可靠。只需要在用户指南、在Stack Overflow，在文章的任何地方看到命令行是以<code>gradle ...</code>开头的地方使用适当的语法。（这段没看懂。。）</p>
<p>为了完整起见，并确保您不删除任何重要的文件，这里是一个gradle工程构成包装的文件和目录：</p>
<ul>
<li>gradlew (Unix Shell script)</li>
<li>gradlew.bat (Windows batch file)</li>
<li>gradle/wrapper/gradle-wrapper.jar (Wrapper JAR)</li>
<li>gradle/wrapper/gradle-wrapper.properties (Wrapper properties)</li>
</ul>
<p>如果你想要知道你的gradle分配被存储在哪里，那么你可以在home目录下的<code>$USER_HOME/.gradle/wrapper/dists</code>目录下找到。</p>
<h2 id="2-添加Wrapper到项目中">2.添加Wrapper到项目中</h2><p>wrapper是一种需要检查版本控制的东西。通过分发你的项目wrapper，任何人都可以使用它而无需事先安装gradle。更好的是，它可以保证构建使用正确的gradle版本。当然，由于不需要服务端的任何配置，这也非常有利于<a href="https://en.wikipedia.org/wiki/Continuous_integration" target="_blank" rel="external">持续集成(continuous integration)</a>服务，(服务器定期构建你的项目)。</p>
<p>通过运行wrapper任务，您将wrapper安装到您的项目中。(这个任务总是可用的，即使你不把它添加到你的构建中)。通过命令参数<code>--gradle-version</code>来指定一个gradle版本。你也可以直接通过命令<code>--gradle-distribution-url</code>来设置gradle下载链接。如果没有版本或分配URL指定的wrapper将被配置为使用gradle的版本的wrapper task执行。所以，如果你通过gradle2.4运行wrapper task，然后wrapper的配置将默认配置为版本2.4。</p>
<p>例如：</p>
<p><strong>运行Wrapper task</strong></p>
<p>执行<code>gradle wrapper --gradle-version 2.0</code></p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; gradle wrapper <span class="comment">--gradle-version 2.0</span></div><div class="line">:wrapper</div><div class="line"></div><div class="line">BUILD SUCCESSFUL</div><div class="line"></div><div class="line">Total <span class="built_in">time</span>: <span class="number">1</span> <span class="built_in">secs</span></div></pre></td></tr></table></figure>
<p>wrapper能够通过在构建脚本中配置一些参数来被进一步定制并且执行：</p>
<p>build.gradle</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="title">task</span> wrapper(<span class="keyword">type</span>: <span class="type">Wrapper</span>) &#123;</div><div class="line">    gradleVersion = '2.0'</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在这样的一个执行之后，你会发现在你的项目目录中的新的或更新的文件（一旦在wrapper task的默认配置被用到）。</p>
<p><strong>Wrapper 生成的文件</strong></p>
<p>Build layout</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">simple/</div><div class="line">  gradlew</div><div class="line">  gradlew<span class="selector-class">.bat</span></div><div class="line">  gradle/wrapper/</div><div class="line">    gradle-wrapper<span class="selector-class">.jar</span></div><div class="line">    gradle-wrapper.properties</div></pre></td></tr></table></figure>
<p>所有这些文件都应该提交给您的版本控制系统。这只需要做一次。在这些文件已经添加到项目中之后，项目构建时就应该加<code>gradlew</code>命令了。<code>gradlew</code>命令可以按照和<code>gradle</code>完全一样的方式来使用。</p>
<p>如果你想切换到一个新的gradle，你不需要重新运行wrapper task。在<code>gradle-wrapper</code>中更改相应的入口就足够了。属性文件，但如果你想要体验新的版本的gradle wrapper，那么你就需要重新生成wrapper文件。</p>
<h2 id="3-配置">3.配置</h2><p>如果你通过<code>gradlew</code>来运行gradle，wrapper会去检查是否有一个可用版本的gradle。如果这样的话它代表将<code>gradlew</code>命令带上所有的参数传递到当前版本的gradle命令上来。如果没有发现一个一个可用的gradle，它就会去自动下载。</p>
<p>当你配置wrapper task，你可以指定一个你想要使用的gradle版本。的gradlew命令将从gradle库下载合适的版本。或者，你也可以指定一个gradle的下载链接。的gradlew命令将使用这个URL下载gradle。如果你既没有指定版本，也没有指定下载链接，那么<code>gradlew</code>命令将下载任意一个版本的gralde来生成wrapper文件。</p>
<p>有关如何配置包装的详细信息，参见<a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.wrapper.Wrapper.html" target="_blank" rel="external">Wrapper</a>类API文档。</p>
<p>如果你在使用<code>gradlew</code>进行构建的过程中，不希望有任何下载产生，只需将gradle的zip包放在你的wrapper配置指定的位置并添加到您的版本控制工具即可。相对路径的支持-您可以指定gradle的文件到一个相对于gradle-wrapper.properties文件的位置。</p>
<p>如果你通过wrapper来构建，机器上安装的任何版本的gradle都会被忽略。</p>
<h2 id="4-验证下载的gradle">4.验证下载的gradle</h2><p>gradle wrapper通过SHA-256哈希比较来校验下载的gradle。这种方式通过阻止中间人篡改下载的gradle来进行攻击，从而提高了安全性。</p>
<p>要启用这个功能，你要先计算一个已知的gradle版本的SHA-256哈希码。你可以通过<code>shasum</code>命令在Linux、OSX或者Windows(通过 Cygwin)上来生成SHA-256哈希码。</p>
<p><strong>生成一个SHA-256 hash</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="selector-tag">shasum</span> <span class="selector-tag">-a</span> 256 <span class="selector-tag">gradle-2</span><span class="selector-class">.4-all</span><span class="selector-class">.zip</span></div><div class="line">371<span class="selector-tag">cb9fbebbe9880d147f59bab36d61eee122854ef8c9ee1ecf12b82368bcf10</span>  <span class="selector-tag">gradle-2</span><span class="selector-class">.4-all</span><span class="selector-class">.zip</span></div></pre></td></tr></table></figure>
<p>通过将<code>distributionSha256Sum</code>属性配置添加到<code>gradle-wrapper.properties</code>来返回校验的哈希码。</p>
<p><strong>配置SHA-256校验</strong></p>
<p>gradle-wrapper.properties</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">distributionSha256Sum</span>=<span class="number">371</span>cb9fbebbe9880d147f59bab36d61eee122854ef8c9ee1ecf12b82368bcf10</div></pre></td></tr></table></figure>
<h2 id="5-UNIX文件的权限">5.UNIX文件的权限</h2><p>对wrapper task添加适当的文件权限来允许*NIX上的命令行上可以执行<code>gradlew</code>命令。我们不确定其他版本控制系统如何处理这个。但<code>sh gradlew</code>这个命令总是很有效的。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/07/07/gradle学习笔记-使用gradle命令行/" itemprop="url">
                gradle学习笔记-使用gradle命令行
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-07-07T13:06:55+08:00" content="2016-07-07">
            2016-07-07
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/gradle/" itemprop="url" rel="index">
                  <span itemprop="name">gradle</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/07/07/gradle学习笔记-使用gradle命令行/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/07/gradle学习笔记-使用gradle命令行/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="1-执行多条tasks">1.执行多条tasks</h2><p>gradle可以在一次构建中执行多条tasks。例如：命令<code>gradle compile test</code>将会执行<code>compile</code>和<code>test</code>这两条task。gradle将会按照命令行上输入的顺序去执行这些task。并且也会去执行这些task所依赖的(dependencies)task。并且保证每个task只被执行一次。</p>
<p>例如：</p>
<p>如下四个task</p>
<p><img src="/img/16_07_09/commandLineTutorialTasks.png" alt=""></p>
<p>build.gradle:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">task</span> <span class="keyword">compile</span> &lt;&lt; &#123;</div><div class="line">    <span class="keyword">println</span> <span class="string">'compiling source'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">task</span> compileTest(dependsOn: <span class="keyword">compile</span>) &lt;&lt; &#123;</div><div class="line">    <span class="keyword">println</span> <span class="string">'compiling unit tests'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">task</span> test(dependsOn: [<span class="keyword">compile</span>, compileTest]) &lt;&lt; &#123;</div><div class="line">    <span class="keyword">println</span> <span class="string">'running unit tests'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">task</span> dist(dependsOn: [<span class="keyword">compile</span>, test]) &lt;&lt; &#123;</div><div class="line">    <span class="keyword">println</span> <span class="string">'building the distribution'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>命令行输入<code>gradle dist test</code>的输出：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&gt; gradle <span class="keyword">dist </span>test</div><div class="line">:compile</div><div class="line">compiling source</div><div class="line">:compileTest</div><div class="line">compiling unit tests</div><div class="line">:test</div><div class="line">running unit tests</div><div class="line">:<span class="keyword">dist</span></div><div class="line"><span class="keyword">building </span>the <span class="keyword">distribution</span></div><div class="line"></div><div class="line"><span class="keyword">BUILD </span>SUCCESSFUL</div><div class="line"></div><div class="line">Total time: <span class="number">1</span> secs</div></pre></td></tr></table></figure>
<p>可以看到每个task只被执行一次，因此命令<code>gradle test test</code>和<code>gradle test</code>的执行效果是一样的。</p>
<h2 id="2-排除某个task(-x_someTask)">2.排除某个task(<code>-x someTask</code>)</h2><p>你也可以通过<code>-x</code>的命令参数来排除某个task的执行：</p>
<p>以下是命令<code>gradle dist -x test</code>的输出：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; gradle <span class="keyword">dist </span>-x test</div><div class="line">:compile</div><div class="line">compiling source</div><div class="line">:<span class="keyword">dist</span></div><div class="line"><span class="keyword">building </span>the <span class="keyword">distribution</span></div><div class="line"></div><div class="line"><span class="keyword">BUILD </span>SUCCESSFUL</div><div class="line"></div><div class="line">Total time: <span class="number">1</span> secs</div></pre></td></tr></table></figure>
<p>从输出结果中可以看出来，<code>test</code>的task并没有被执行，即使它是<code>dist</code>所依赖的task。</p>
<p>有一个细节也许你已经注意到了：<code>test</code>所依赖的task例如<code>compileTest</code>并没有被执行，因为这个task并没有被其他不被排除的task所依赖，为什么<code>compile</code>这个task也是被<code>test</code>所依赖，但却被执行了呢？那是因为<code>compile</code>这个task被其他不被排除的task所依赖了。</p>
<h2 id="3-当发生失败的时候依然继续执行构建(-continue)">3.当发生失败的时候依然继续执行构建(<code>--continue</code>)</h2><p>默认情况下，gradle会在任意一个task执行失败的时候立刻中断执行。gradle可以使得构建速度更快，但需要以隐藏发生的失败为代价。为了能够在一次构建的执行中发现尽可能多的失败，你可以使用<code>--continue</code>选项。</p>
<p>当在命令中加入<code>--continue</code>,gradle将会执行每一个要被执行的task，以及所有的依赖task，并且无错误的完成task，而不是一旦遇到错误就立马停止。并且每一个发生的失败都会在构建结束后上报出来。</p>
<p>如果一个task失败了，那么任何依赖于这个产生失败的task的子task也不会被执行，这样做是不安全的。例如，如果在测试代码中有一个编译失败，测试将不会运行；因为测试任务将直接或间接的取决于编译任务。</p>
<h2 id="4-task名字的缩写">4.task名字的缩写</h2><p>当你在命令行上指定task时，你没必要指定task的全名。你只需要提供足够长的能唯一标识task的名字即可。例如：在上面的构建例子中，你可以通过命令<code>gradle d</code>来执行<code>dist</code>这条task。</p>
<p><code>gradle di</code>的输出:</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&gt; gradle <span class="keyword">di</span></div><div class="line">:compile</div><div class="line">compiling source</div><div class="line">:compileTest</div><div class="line">compiling unit tests</div><div class="line">:test</div><div class="line">running unit tests</div><div class="line">:<span class="keyword">dist</span></div><div class="line"><span class="keyword">building </span>the <span class="keyword">distribution</span></div><div class="line"></div><div class="line"><span class="keyword">BUILD </span>SUCCESSFUL</div><div class="line"></div><div class="line">Total time: <span class="number">1</span> secs</div></pre></td></tr></table></figure>
<p>你也可以通过每个task名称的单词的首字母的驼峰缩写来标识一个task：你可以通过执行<code>gradle compTest</code>或者甚至是<code>gradle cT</code>来执行<code>compileTest</code>这个task。</p>
<p><code>gradle cT</code>的输出：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="selector-tag">gradle</span> <span class="selector-tag">cT</span></div><div class="line"><span class="selector-pseudo">:compile</span></div><div class="line"><span class="selector-tag">compiling</span> <span class="selector-tag">source</span></div><div class="line"><span class="selector-pseudo">:compileTest</span></div><div class="line"><span class="selector-tag">compiling</span> <span class="selector-tag">unit</span> <span class="selector-tag">tests</span></div><div class="line"></div><div class="line"><span class="selector-tag">BUILD</span> <span class="selector-tag">SUCCESSFUL</span></div><div class="line"></div><div class="line"><span class="selector-tag">Total</span> <span class="selector-tag">time</span>: 1 <span class="selector-tag">secs</span></div></pre></td></tr></table></figure>
<p>以上规则对<code>-x</code>项(排除某个task)也是适用的。</p>
<h2 id="5-选择某一条构建去执行">5.选择某一条构建去执行</h2><p>当你运行gradle命令时，它会在当前目录中查找一个build文件。你可以使用<code>-b</code>选项来选择其他的build文件。如果你使用了<code>-b</code>选项，那么<code>settings.gradle</code>这个文件将不起作用。</p>
<p>举个例子：</p>
<p>选择一个工程使用build文件：</p>
<p>subdir/myproject.gradle</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">task</span> hello &lt;&lt; &#123;</div><div class="line">    <span class="attribute">println</span> <span class="string">"using build file '<span class="variable">$buildFile</span>.name' in '<span class="variable">$buildFile</span>.parentFile.name'."</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>执行<code>gradle -q -b subdir/myproject.gradle hello</code></p>
<p><em>这里<code>-q</code>是“安静模式”，指过程中只会输出错误log</em></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; gradle -<span class="selector-tag">q</span> -<span class="selector-tag">b</span> subdir/myproject<span class="selector-class">.gradle</span> hello</div><div class="line">using build file <span class="string">'myproject.gradle'</span> <span class="keyword">in</span> <span class="string">'subdir'</span>.</div></pre></td></tr></table></figure>
<p>另外一种方式，你可以使用<code>-p</code>选项来指定项目所在的路径。对于多项目构建，你应该使用<code>-p</code>选项来代替<code>-b</code>选项。</p>
<p>执行<code>gradle -q -p subdir hello</code></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; gradle -<span class="selector-tag">q</span> -<span class="selector-tag">p</span> subdir hello</div><div class="line">using build file <span class="string">'build.gradle'</span> <span class="keyword">in</span> <span class="string">'subdir'</span>.</div></pre></td></tr></table></figure>
<h2 id="6-强制执行task(-rerun-tasks_someTask)">6.强制执行task(<code>--rerun-tasks someTask</code>)</h2><p>许多task，尤其是gradle自身的task，都支持<strong>incremental builds(增量构建)</strong>。这种task可以决定是否需要运行，或者通过最后一次运行之后的输入输出文件是否有变动来判断是否有必要重新运行。你可以通过在执行构建时gradle列出的<code>UP-TO-DATE</code>,来很容易的认出<code>incremental tasks</code>。</p>
<p>某些场景下，你也许希望忽略<code>up-to-date</code>的检查，来强制执行gradle所有的task。这种情况下，你只需要使用<code>--rerun-tasks</code>这条命令即可。</p>
<p>以下是两个例子的输出，分别是执行task带有和不带有<code>--rerun-tasks</code>命令：</p>
<p>执行<code>gradle doIt</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; gradle <span class="keyword">do</span>It</div><div class="line">:<span class="keyword">do</span>It UP-TO-DATE</div></pre></td></tr></table></figure>
<p>执行<code>gradle --rerun-tasks doIt</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; gradle --rerun-tasks <span class="keyword">do</span>It</div><div class="line">:<span class="keyword">do</span>It</div></pre></td></tr></table></figure>
<blockquote>
<p>注意：这将会强制执行全部的task，不仅仅是你在命令行上指定的那些。这有点像在运行<code>clean</code>，但不同的是没有任何的输出会被删除掉。</p>
</blockquote>
<h2 id="7-获取关于你的构建的信息">7.获取关于你的构建的信息</h2><p>gradle提供了多个用来显示构建详情的内置task。这些可以被用来理解你项目构建的结构和依赖，以及用debug调试问题。</p>
<p>除了这些内置task之外，    你也可以使用project report plugin(项目报告插件)，添加到你的项目中，就可以生成这些信息报告了。</p>
<h3 id="7-1-展示项目列表(gradle_projects)">7.1.展示项目列表(<code>gradle projects</code>)</h3><p>运行<code>gradle projects</code>，你会得到一个你所选项目的子项目清单，并且是分层显示的哦。下面就是一个例子：</p>
<p>输入<code>gradle -q projects</code></p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt; gradle -q projects</div><div class="line"></div><div class="line">------------------------------------------------------------</div><div class="line">Root <span class="keyword">project</span></div><div class="line">------------------------------------------------------------</div><div class="line"></div><div class="line">Root <span class="keyword">project</span> <span class="string">'projectReports'</span></div><div class="line">+--- <span class="keyword">Project</span> <span class="string">':api'</span> - The shared API <span class="keyword">for</span> the application</div><div class="line">\--- <span class="keyword">Project</span> <span class="string">':webapp'</span> - The Web application implementation</div><div class="line"></div><div class="line">To see a list of the tasks of a <span class="keyword">project</span>, run gradle &lt;<span class="keyword">project</span>-path&gt;:tasks</div><div class="line"><span class="keyword">For</span> example, <span class="keyword">try</span> running gradle :api:tasks</div></pre></td></tr></table></figure>
<p>该报告展示了每个项目的描述（如果项目被设置了描述）。你也可以通过设置描述特性，来为一个项目提供一个描述。</p>
<p>例如在<code>build.gradle</code>中添加描述：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">description</span> = <span class="string">'The shared API for the application'</span></div></pre></td></tr></table></figure>
<h3 id="7-2_展示task列表(gradle_tasks)">7.2 展示task列表(<code>gradle tasks</code>)</h3><p>运行<code>gradle tasks</code>可以得到当前项目的主task。生成的报告清单会显示所有的默认task，当然，如果有描述信息的话，也会一并显示。</p>
<p>例如：</p>
<p>运行<code>gradle -q tasks</code>会得到如下输出：</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">&gt; gradle -q tasks</div><div class="line"></div><div class="line"><span class="comment">------------------------------------------------------------</span></div><div class="line">All tasks runnable <span class="built_in">from</span> root project</div><div class="line"><span class="comment">------------------------------------------------------------</span></div><div class="line"></div><div class="line">Default tasks: dists</div><div class="line"></div><div class="line">Build tasks</div><div class="line"><span class="comment">-----------</span></div><div class="line">clean - Deletes <span class="keyword">the</span> build <span class="built_in">directory</span> (build)</div><div class="line">dists - Builds <span class="keyword">the</span> distribution</div><div class="line">libs - Builds <span class="keyword">the</span> JAR</div><div class="line"></div><div class="line">Build Setup tasks</div><div class="line"><span class="comment">-----------------</span></div><div class="line">init - Initializes <span class="keyword">a</span> <span class="built_in">new</span> Gradle build. [incubating]</div><div class="line">wrapper - Generates Gradle wrapper <span class="built_in">files</span>. [incubating]</div><div class="line"></div><div class="line">Help tasks</div><div class="line"><span class="comment">----------</span></div><div class="line">buildEnvironment - Displays all buildscript dependencies declared <span class="keyword">in</span> root project <span class="string">'projectReports'</span>.</div><div class="line">components - Displays <span class="keyword">the</span> components produced <span class="keyword">by</span> root project <span class="string">'projectReports'</span>. [incubating]</div><div class="line">dependencies - Displays all dependencies declared <span class="keyword">in</span> root project <span class="string">'projectReports'</span>.</div><div class="line">dependencyInsight - Displays <span class="keyword">the</span> insight <span class="keyword">into</span> <span class="keyword">a</span> specific dependency <span class="keyword">in</span> root project <span class="string">'projectReports'</span>.</div><div class="line">help - Displays <span class="keyword">a</span> help message.</div><div class="line">model - Displays <span class="keyword">the</span> configuration model <span class="keyword">of</span> root project <span class="string">'projectReports'</span>. [incubating]</div><div class="line">projects - Displays <span class="keyword">the</span> sub-projects <span class="keyword">of</span> root project <span class="string">'projectReports'</span>.</div><div class="line">properties - Displays <span class="keyword">the</span> properties <span class="keyword">of</span> root project <span class="string">'projectReports'</span>.</div><div class="line">tasks - Displays <span class="keyword">the</span> tasks runnable <span class="built_in">from</span> root project <span class="string">'projectReports'</span> (some <span class="keyword">of</span> <span class="keyword">the</span> displayed tasks may belong <span class="built_in">to</span> subprojects).</div><div class="line"></div><div class="line">To see all tasks <span class="keyword">and</span> more detail, run gradle tasks <span class="comment">--all</span></div><div class="line"></div><div class="line">To see more detail about <span class="keyword">a</span> task, run gradle help <span class="comment">--task &lt;task&gt;</span></div></pre></td></tr></table></figure>
<p>默认情况下，此报告只显示已被分配给一个task group的task。你可以设置task的所在组，也可以设置task的描述信息。这些设置都会在这份报告中展示。</p>
<p>例如：</p>
<p>build.gradle</p>
<figure class="highlight puppet"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">dists</span> &#123;</div><div class="line">    <span class="literal">description</span> = <span class="string">'Builds the distribution'</span></div><div class="line">    <span class="literal">group</span> = <span class="string">'build'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>你可以通过使用<code>--all</code>命令来获取更多的task列表信息。通过这个命令，task列表报告单会显示当前项目的所有的task，并且会按照主task以及每个task的依赖进行分组展示。下面是一个例子：</p>
<p>获取有关task的更多信息</p>
<p>执行<code>gradle -q tasks --all</code>:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">&gt; gradle -q tasks <span class="comment">--all</span></div><div class="line"></div><div class="line"><span class="comment">------------------------------------------------------------</span></div><div class="line">All tasks runnable <span class="built_in">from</span> root project</div><div class="line"><span class="comment">------------------------------------------------------------</span></div><div class="line"></div><div class="line">Default tasks: dists</div><div class="line"></div><div class="line">Build tasks</div><div class="line"><span class="comment">-----------</span></div><div class="line">clean - Deletes <span class="keyword">the</span> build <span class="built_in">directory</span> (build)</div><div class="line">api:clean - Deletes <span class="keyword">the</span> build <span class="built_in">directory</span> (build)</div><div class="line">webapp:clean - Deletes <span class="keyword">the</span> build <span class="built_in">directory</span> (build)</div><div class="line">dists - Builds <span class="keyword">the</span> distribution [api:libs, webapp:libs]</div><div class="line">    docs - Builds <span class="keyword">the</span> documentation</div><div class="line">api:libs - Builds <span class="keyword">the</span> JAR</div><div class="line">    api:compile - Compiles <span class="keyword">the</span> source <span class="built_in">files</span></div><div class="line">webapp:libs - Builds <span class="keyword">the</span> JAR [api:libs]</div><div class="line">    webapp:compile - Compiles <span class="keyword">the</span> source <span class="built_in">files</span></div><div class="line"></div><div class="line">Build Setup tasks</div><div class="line"><span class="comment">-----------------</span></div><div class="line">init - Initializes <span class="keyword">a</span> <span class="built_in">new</span> Gradle build. [incubating]</div><div class="line">wrapper - Generates Gradle wrapper <span class="built_in">files</span>. [incubating]</div><div class="line"></div><div class="line">Help tasks</div><div class="line"><span class="comment">----------</span></div><div class="line">buildEnvironment - Displays all buildscript dependencies declared <span class="keyword">in</span> root project <span class="string">'projectReports'</span>.</div><div class="line">api:buildEnvironment - Displays all buildscript dependencies declared <span class="keyword">in</span> project <span class="string">':api'</span>.</div><div class="line">webapp:buildEnvironment - Displays all buildscript dependencies declared <span class="keyword">in</span> project <span class="string">':webapp'</span>.</div><div class="line">components - Displays <span class="keyword">the</span> components produced <span class="keyword">by</span> root project <span class="string">'projectReports'</span>. [incubating]</div><div class="line">api:components - Displays <span class="keyword">the</span> components produced <span class="keyword">by</span> project <span class="string">':api'</span>. [incubating]</div><div class="line">webapp:components - Displays <span class="keyword">the</span> components produced <span class="keyword">by</span> project <span class="string">':webapp'</span>. [incubating]</div><div class="line">dependencies - Displays all dependencies declared <span class="keyword">in</span> root project <span class="string">'projectReports'</span>.</div><div class="line">api:dependencies - Displays all dependencies declared <span class="keyword">in</span> project <span class="string">':api'</span>.</div><div class="line">webapp:dependencies - Displays all dependencies declared <span class="keyword">in</span> project <span class="string">':webapp'</span>.</div><div class="line">dependencyInsight - Displays <span class="keyword">the</span> insight <span class="keyword">into</span> <span class="keyword">a</span> specific dependency <span class="keyword">in</span> root project <span class="string">'projectReports'</span>.</div><div class="line">api:dependencyInsight - Displays <span class="keyword">the</span> insight <span class="keyword">into</span> <span class="keyword">a</span> specific dependency <span class="keyword">in</span> project <span class="string">':api'</span>.</div><div class="line">webapp:dependencyInsight - Displays <span class="keyword">the</span> insight <span class="keyword">into</span> <span class="keyword">a</span> specific dependency <span class="keyword">in</span> project <span class="string">':webapp'</span>.</div><div class="line">help - Displays <span class="keyword">a</span> help message.</div><div class="line">api:help - Displays <span class="keyword">a</span> help message.</div><div class="line">webapp:help - Displays <span class="keyword">a</span> help message.</div><div class="line">model - Displays <span class="keyword">the</span> configuration model <span class="keyword">of</span> root project <span class="string">'projectReports'</span>. [incubating]</div><div class="line">api:model - Displays <span class="keyword">the</span> configuration model <span class="keyword">of</span> project <span class="string">':api'</span>. [incubating]</div><div class="line">webapp:model - Displays <span class="keyword">the</span> configuration model <span class="keyword">of</span> project <span class="string">':webapp'</span>. [incubating]</div><div class="line">projects - Displays <span class="keyword">the</span> sub-projects <span class="keyword">of</span> root project <span class="string">'projectReports'</span>.</div><div class="line">api:projects - Displays <span class="keyword">the</span> sub-projects <span class="keyword">of</span> project <span class="string">':api'</span>.</div><div class="line">webapp:projects - Displays <span class="keyword">the</span> sub-projects <span class="keyword">of</span> project <span class="string">':webapp'</span>.</div><div class="line">properties - Displays <span class="keyword">the</span> properties <span class="keyword">of</span> root project <span class="string">'projectReports'</span>.</div><div class="line">api:properties - Displays <span class="keyword">the</span> properties <span class="keyword">of</span> project <span class="string">':api'</span>.</div><div class="line">webapp:properties - Displays <span class="keyword">the</span> properties <span class="keyword">of</span> project <span class="string">':webapp'</span>.</div><div class="line">tasks - Displays <span class="keyword">the</span> tasks runnable <span class="built_in">from</span> root project <span class="string">'projectReports'</span> (some <span class="keyword">of</span> <span class="keyword">the</span> displayed tasks may belong <span class="built_in">to</span> subprojects).</div><div class="line">api:tasks - Displays <span class="keyword">the</span> tasks runnable <span class="built_in">from</span> project <span class="string">':api'</span>.</div><div class="line">webapp:tasks - Displays <span class="keyword">the</span> tasks runnable <span class="built_in">from</span> project <span class="string">':webapp'</span>.</div></pre></td></tr></table></figure>
<h3 id="7-3_显示task的使用细节(gradle_help_-task_someTask)">7.3 显示task的使用细节(<code>gradle help --task someTask</code>)</h3><p>运行<code>gradle help --task someTask</code>会得到一个关于你所选择的task或者与你输入名称相匹配的一系列task的详细信息。</p>
<p>下面是一个例子：</p>
<p><code>gradle -q help --task libs</code>执行的输出：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="selector-tag">gradle</span> <span class="selector-tag">-q</span> <span class="selector-tag">help</span> <span class="selector-tag">--task</span> <span class="selector-tag">libs</span></div><div class="line"><span class="selector-tag">Detailed</span> <span class="selector-tag">task</span> <span class="selector-tag">information</span> <span class="selector-tag">for</span> <span class="selector-tag">libs</span></div><div class="line"></div><div class="line"><span class="selector-tag">Paths</span></div><div class="line">     <span class="selector-pseudo">:api</span><span class="selector-pseudo">:libs</span></div><div class="line">     <span class="selector-pseudo">:webapp</span><span class="selector-pseudo">:libs</span></div><div class="line"></div><div class="line"><span class="selector-tag">Type</span></div><div class="line">     <span class="selector-tag">Task</span> (<span class="selector-tag">org</span><span class="selector-class">.gradle</span><span class="selector-class">.api</span><span class="selector-class">.Task</span>)</div><div class="line"></div><div class="line"><span class="selector-tag">Description</span></div><div class="line">     <span class="selector-tag">Builds</span> <span class="selector-tag">the</span> <span class="selector-tag">JAR</span></div><div class="line"></div><div class="line"><span class="selector-tag">Group</span></div><div class="line">     <span class="selector-tag">build</span></div></pre></td></tr></table></figure>
<p>这些信息包含全部的task路径，task的类型，可能有的命令行选项和给定的task的描述。</p>
<h3 id="7-4_列出项目的依赖项(gradle_dependencies)">7.4 列出项目的依赖项(<code>gradle dependencies</code>)</h3><p>运行<code>gradle dependencies</code>，列出了所选项目的所有依赖，以及被配置项分解的依赖。对于每个配置，该配置的直接和传递的依赖关系都会在树中显示。下面是一个例子：</p>
<p><strong>获取依赖关系的信息</strong></p>
<p>运行<code>gradle -q dependencies api:dependencies webapp:dependencies</code></p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">&gt; gradle -q dependencies api:dependencies webapp:dependencies</div><div class="line"></div><div class="line"><span class="code">------------------------------------------------------------</span></div><div class="line">Root project</div><div class="line">------------------------------------------------------------</div><div class="line"></div><div class="line">No configurations</div><div class="line"></div><div class="line"><span class="code">------------------------------------------------------------</span></div><div class="line">Project :api - The shared API for the application</div><div class="line">------------------------------------------------------------</div><div class="line"></div><div class="line">compile</div><div class="line">\--- org.codehaus.groovy:groovy-all:2.4.4</div><div class="line"></div><div class="line">testCompile</div><div class="line">\--- junit:junit:4.12</div><div class="line"><span class="code">     \--- org.hamcrest:hamcrest-core:1.3</span></div><div class="line"></div><div class="line"><span class="code">------------------------------------------------------------</span></div><div class="line">Project :webapp - The Web application implementation</div><div class="line">------------------------------------------------------------</div><div class="line"></div><div class="line">compile</div><div class="line">+--- project :api</div><div class="line">|    \--- org.codehaus.groovy:groovy-all:2.4.4</div><div class="line">\--- commons-io:commons-io:1.2</div><div class="line"></div><div class="line">testCompile</div><div class="line">No dependencies</div></pre></td></tr></table></figure>
<p>由于一个依赖报告可能会变得很大，所以有必要通过一些配置来过滤依赖报告的显示。通过命令参数<code>--configuration</code>来实现：</p>
<p><strong>通过配置来过滤依赖项报告</strong></p>
<p><code>gradle -q api:dependencies --configuration testCompile</code>的输出结果：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; gradle -q api:dependencies --configuration testCompile</div><div class="line"></div><div class="line"><span class="code">------------------------------------------------------------</span></div><div class="line">Project :api - The shared API for the application</div><div class="line">------------------------------------------------------------</div><div class="line"></div><div class="line">testCompile</div><div class="line">\--- junit:junit:4.12</div><div class="line"><span class="code">     \--- org.hamcrest:hamcrest-core:1.3</span></div></pre></td></tr></table></figure>
<h3 id="7-5_列出项目构建脚本依赖(gradle_buildEnvironment)">7.5 列出项目构建脚本依赖(<code>gradle buildEnvironment</code>)</h3><p>运行<code>gradle buildEnvironment</code>可以看见项目的依赖的构建脚本，类似于执行<code>gradle dependencies</code>列出构建的依赖项的展示。</p>
<h3 id="7-6_观察一个特定的依赖项">7.6 观察一个特定的依赖项</h3><p>运行<code>gradle dependencyInsight</code>你将得到一个与你输入匹配的一条或多条依赖项的内部信息。下面是一个例子：</p>
<p><strong>观察一个特定的依赖</strong></p>
<p>运行<code>gradle -q webapp:dependencyInsight --dependency groovy --configuration compile</code>:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="selector-tag">gradle</span> <span class="selector-tag">-q</span> <span class="selector-tag">webapp</span><span class="selector-pseudo">:dependencyInsight</span> <span class="selector-tag">--dependency</span> <span class="selector-tag">groovy</span> <span class="selector-tag">--configuration</span> <span class="selector-tag">compile</span></div><div class="line"><span class="selector-tag">org</span><span class="selector-class">.codehaus</span><span class="selector-class">.groovy</span><span class="selector-pseudo">:groovy-all</span><span class="selector-pseudo">:2.4.4</span></div><div class="line">\<span class="selector-tag">---</span> <span class="selector-tag">project</span> <span class="selector-pseudo">:api</span></div><div class="line">     \<span class="selector-tag">---</span> <span class="selector-tag">compile</span></div></pre></td></tr></table></figure>
<p>这个task对于解决调查一个依赖，发现一定的依赖关系是从哪里来的，某些版本的选择原因是什么，是非常有用的。更多的信息，请查阅<a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.diagnostics.DependencyInsightReportTask.html" target="_blank" rel="external">DependencyInsightReportTask</a>类的API文档。</p>
<p>内置的dependencyInsight task在’Help’的task组内。task需要配置依赖项和设置信息。该报告查找在指定的配置中匹配指定的依赖性规范的依赖。如果应用java相关的插件，那么dependencyInsight task就被预配置了’compile’这条配置，因为通常情况下，编译依赖是我们感兴趣的。你应该指定你感兴趣的依赖，通过命令行<code>--dependency</code>选项。如果你不喜欢的默认值，你可以通过<code>--configuration</code>选项来选择配置。更多的信息，请查阅<a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.diagnostics.DependencyInsightReportTask.html" target="_blank" rel="external">DependencyInsightReportTask</a>类的API文档。</p>
<h3 id="7-7_列出项目属性gradle_properties">7.7 列出项目属性<code>gradle properties</code></h3><p>运行<code>gradle properties</code>列出一个项目属性的列表。下面是一小片输出：</p>
<p><strong>信息的属性</strong></p>
<p><code>gradle -q api:properties</code></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt; gradle -<span class="selector-tag">q</span> api:properties</div><div class="line"></div><div class="line">------------------------------------------------------------</div><div class="line">Project :api - The shared API <span class="keyword">for</span> the application</div><div class="line">------------------------------------------------------------</div><div class="line"></div><div class="line">allprojects: [project <span class="string">':api'</span>]</div><div class="line">ant: org<span class="selector-class">.gradle</span><span class="selector-class">.api</span><span class="selector-class">.internal</span><span class="selector-class">.project</span><span class="selector-class">.DefaultAntBuilder</span>@<span class="number">12345</span></div><div class="line">antBuilderFactory: org<span class="selector-class">.gradle</span><span class="selector-class">.api</span><span class="selector-class">.internal</span><span class="selector-class">.project</span><span class="selector-class">.DefaultAntBuilderFactory</span>@<span class="number">12345</span></div><div class="line">artifacts: org<span class="selector-class">.gradle</span><span class="selector-class">.api</span><span class="selector-class">.internal</span><span class="selector-class">.artifacts</span><span class="selector-class">.dsl</span><span class="selector-class">.DefaultArtifactHandler_Decorated</span>@<span class="number">12345</span></div><div class="line">asDynamicObject: DynamicObject <span class="keyword">for</span> project <span class="string">':api'</span></div><div class="line">baseClassLoaderScope: org<span class="selector-class">.gradle</span><span class="selector-class">.api</span><span class="selector-class">.internal</span><span class="selector-class">.initialization</span><span class="selector-class">.DefaultClassLoaderScope</span>@<span class="number">12345</span></div><div class="line">buildDir: /home/user/gradle/samples/userguide/tutorial/projectReports/api/build</div><div class="line">buildFile: /home/user/gradle/samples/userguide/tutorial/projectReports/api/build.gradle</div></pre></td></tr></table></figure>
<h3 id="7-8_分析构建(-profile)">7.8 分析构建(<code>--profile</code>)</h3><p><code>--profile</code>命令选项会在你执行构建上报出有用的定时信息，并输出在<code>build/reports/profile</code>目录下。报告被命名为构建运行的时间。</p>
<p>这份报告列出了配置阶段和任务执行的汇总时间和详细信息。配置和任务执行的时间按照花费时间最高到最低进行排序。任务执行结果还表明，是否有任何任务被跳过（以及原因），或者如果没有跳过的任务没有工作。</p>
<p>利用buildsrc目录的构建，将在buildSrc/build目录下会生成第二份报告。</p>
<p><img src="/img/16_07_09/profile.png" alt=""></p>
<h2 id="8-Dry_Run">8.Dry Run</h2><p>有时，您是希望在命令行上指定一组给定的task的执行的顺序，但你不希望task被执行。你可以使用<code>-m</code>命令项。例如<code>gradle -m clean compile</code>，你将会看见全部作为clean和compile的task的一部分的将被执行的task。这些会展示给你所依赖的可被执行的task。</p>
<h2 id="9-总结">9.总结</h2><p>在这一节中，你看到了你可以通过gradle命令行做到的一些事情，更多命令可以查阅<a href="https://docs.gradle.org/current/userguide/gradle_command_line.html" target="_blank" rel="external">Appendix D, Gradle Command Line</a>。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/05/31/UML类图基本关系/" itemprop="url">
                UML类图基本关系
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-05-31T14:06:55+08:00" content="2016-05-31">
            2016-05-31
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/工具学习/" itemprop="url" rel="index">
                  <span itemprop="name">工具学习</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/05/31/UML类图基本关系/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/31/UML类图基本关系/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="关系汇总">关系汇总</h2><p>uml的类图是用来描述类与类之间的基本关系一种图。常见的有以下几种关系: </p>
<h3 id="继承关系">继承关系</h3><ul>
<li><strong>泛化(Generalization)</strong></li>
<li><strong>实现(Realization)</strong></li>
</ul>
<h3 id="拥有关系">拥有关系</h3><ul>
<li><strong>关联(Association)</strong></li>
<li><strong>聚合(Aggregation)</strong></li>
<li><strong>组合(Composition)</strong></li>
</ul>
<h3 id="使用关系">使用关系</h3><ul>
<li><strong>依赖(Dependency)</strong></li>
</ul>
<hr>
<h2 id="继承关系-1">继承关系</h2><h3 id="泛化(Generalization)">泛化(Generalization)</h3><p>是一种继承关系, 表示一般与特殊的关系, 它指定了子类如何特化父类的所有特征和行为。</p>
<p><img src="/img/16_05_31/01.png" alt="泛化"></p>
<h3 id="实现（Realization）">实现（Realization）</h3><p>是一种类与接口的关系，表示类是接口所有特征和行为的实现。</p>
<p><img src="/img/16_05_31/02.png" alt="实现"></p>
<h2 id="拥有关系-1">拥有关系</h2><h3 id="关联(Association)">关联(Association)</h3><p>是一种拥有的关系，它使一个类知道另一个类的属性和方法；具体代码体现是：成员变量。双向的关联可以有两个箭头或者没有箭头，单向的关联有一个箭头。</p>
<p><img src="/img/16_05_31/03.png" alt="实现"></p>
<h3 id="聚合(Aggregation)">聚合(Aggregation)</h3><p>是整体与部分的关系，且部分可以离开整体而单独存在。如车和轮胎是整体和部分的关系，轮胎离开车仍然可以存在。具体的代码体现也是成员变量，但突出强调整体和部分的关系。</p>
<p><img src="/img/16_05_31/04.png" alt="实现"></p>
<h3 id="组合(Composition)">组合(Composition)</h3><p>是整体与部分的关系，但部分不能离开整体而单独存在。如公司和部门是整体和部分的关系，没有公司就不存在部门。</p>
<p>组合关系是关联关系的一种，是比聚合关系还要强的关系，它要求普通的聚合关系中代表整体的对象负责代表部分的对象的生命周期。</p>
<p><img src="/img/16_05_31/05.png" alt="组合"></p>
<h2 id="使用关系-1">使用关系</h2><h3 id="依赖(Dependency)">依赖(Dependency)</h3><p>是一种使用的关系，即一个类的实现需要另一个类的协助。具体代码实现为：局部变量、方法的参数或者对静态方法的调用。</p>
<p><img src="/img/16_05_31/06.png" alt="组合"></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/05/09/Linux学习笔记（4）文件打包与压缩/" itemprop="url">
                Linux学习笔记（4）文件打包与压缩
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-05-09T23:33:55+08:00" content="2016-05-09">
            2016-05-09
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/linux/" itemprop="url" rel="index">
                  <span itemprop="name">linux</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/05/09/Linux学习笔记（4）文件打包与压缩/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/09/Linux学习笔记（4）文件打包与压缩/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="使用zip打包文件夹">使用zip打包文件夹</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ zip -r -<span class="selector-tag">q</span> -o lijianan<span class="selector-class">.zip</span> /home/lijianan</div><div class="line">$ du -h lijianan<span class="selector-class">.zip</span></div><div class="line">$ file lijianan.zip</div></pre></td></tr></table></figure>
<p>上面命令将<code>lijianan</code>的<code>home</code>目录打包成一个文件，并查看了打包后文件的大小和类型。</p>
<p>第一行命令中，<code>-r</code>参数表示递归打包包含子目录全部内容，<code>-q</code>参数表示为安静模式，即不向屏幕输出信息,<code>-o</code>表示输出文件，需在其后紧跟打包输出文件名。</p>
<p>后面使用<code>du</code>命令查看打包后文件的大小.</p>
<p>设置压缩级别为<code>9</code>和<code>1</code>（<code>9</code>最大，<code>1</code>最小），重新打包：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ zip -r -<span class="number">9</span> -<span class="selector-tag">q</span> -o lijianan_9<span class="selector-class">.zip</span> /home/lijianan -x ~<span class="comment">/*.zip</span></div><div class="line">$ zip -r -1 -q -o lijianan_1.zip /home/lijianan -x ~<span class="comment">/*.zip</span></div></pre></td></tr></table></figure>
<p>这里添加了一个参数用于设置压缩级别<code>-[1-9]</code>，<code>1</code>表示最快压缩但体积大，<code>9</code>表示体积最小但耗时最久。</p>
<p>最后那个<code>-x</code>是为了排除我们上一次创建的<code>zip</code>文件，否则又会被打包进这一次的压缩文件中，<strong>注意：这里压缩文件存放路径只能使用绝对路径，否则不起作用。</strong></p>
<p>我们用<code>du</code>命令来查看几种压缩的效果：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ du -<span class="keyword">h</span> -<span class="keyword">d</span> 0 *.<span class="keyword">zip</span> ~ | <span class="keyword">sort</span></div></pre></td></tr></table></figure>
<p>这里<code>-h</code>是<code>human-readable</code>人类可读的模式。<code>-d</code>是<code>max-depth</code>所查看文件的深度.这里<code>-d 0</code>就是指在当前这一层目录下。</p>
<h2 id="创建加密zip包">创建加密zip包</h2><p>使用<code>-e</code>参数可以创建加密压缩包：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="keyword">zip</span> -r -<span class="keyword">e</span> -o lijianan_encryption.<span class="keyword">zip</span> /home/lijianan</div></pre></td></tr></table></figure>
<p><strong>注意：</strong>由于在<code>linux</code>和<code>windows</code>上对换行符处理的不同，想要做到<code>linux</code>上创建的<code>zip</code>文件在<code>windows</code>上解压后可以正常显示，那么还需要做一些修改：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="keyword">zip</span> -r -<span class="keyword">l</span> -o lijianan.<span class="keyword">zip</span> /home/lijianan</div></pre></td></tr></table></figure>
<p>需要加上<code>-l</code>参数将<code>LF</code>(<code>linux</code>换行)转换为<code>CR+LF</code>(<code>windows</code>换行)。</p>
<h2 id="解压缩文件">解压缩文件</h2><p>将<code>lijianan.zip</code>解压到当前目录：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>unzip lijianan.zip</div></pre></td></tr></table></figure>
<p>使用安静模式，将文件解压到指定目录，如果指定目录不存在，将会自动创建：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ unzip -<span class="selector-tag">q</span> lijianan<span class="selector-class">.zip</span> -d ziptest</div></pre></td></tr></table></figure>
<p>如果不想解压缩，只想查看压缩包的内容，可以使用<code>-l</code>参数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ unzip <span class="_">-l</span> lijianan.zip</div></pre></td></tr></table></figure>
<p><strong>注意：</strong>使用unzip解压文件时，同样需要考虑兼容问题。这里我们需要考虑的是中文编码问题。通常在<code>windows</code>上创建的压缩文件，如果包涵有中文的文档或者以中文作为文件名的文件时默认会采用<code>GBK</code>或其它编码，而<code>Linux</code>上面默认使用的是<code>UTF-8</code>编码，如果不做任何处理，直接解压可能会出现中文乱码的问题，为了解决这个问题，我们可以在解压时指定编码类型。</p>
<p>使用 <code>-O</code>(不是数字0，是<code>o</code>的大写)参数指定编码类型：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>unzip -O GBK 中文压缩文件.zip</div></pre></td></tr></table></figure>
<h2 id="rar打包压缩命令">rar打包压缩命令</h2><p>安装<code>rar</code>和<code>unrar</code>工具：</p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></div><div class="line">$ sudo apt-<span class="built_in">get</span> install rar unrar</div></pre></td></tr></table></figure>
<p>使用<code>rar</code>压缩:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rar <span class="selector-tag">a</span> lijianan<span class="selector-class">.rar</span> .</div></pre></td></tr></table></figure>
<p>上面的命令使用<code>a</code>参数添加一个目录.到一个归档文件中，如果改文件不存在就会自动创建。</p>
<p><strong>注意：</strong><code>rar</code>的命令没有<code>-</code>，如果加上会报错。</p>
<p>从指定压缩包文件中删除某个文件：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rar d lijianan<span class="selector-class">.rar</span> .zshrc</div></pre></td></tr></table></figure>
<p>查看不解压文件：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>rar l lijianan.rar</div></pre></td></tr></table></figure>
<p>使用<code>unrar</code>解压<code>rar</code>文件：</p>
<p>全路径解压：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>unrar x lijianan.rar</div></pre></td></tr></table></figure>
<p>去掉路径解压：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>mkdir tmp</div><div class="line"><span class="variable">$ </span>unrar e lijianan.rar tmp/</div></pre></td></tr></table></figure>
<h2 id="tar打包工具">tar打包工具</h2><p>在<code>Linux</code>上更常用的是<code>tar</code>工具，<code>tar</code>原本只是一个打包工具，只是同时还实现了对7z，gzip，xz，bzip2等工具的支持。<code>tar</code>的解压和压缩都是同一个命令，只需要参数不同，使用比较方便。</p>
<p>不压缩只打包：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tar cf lijianan<span class="selector-class">.tar</span> ~</div></pre></td></tr></table></figure>
<p>上面命令中，<code>-c</code>表示创建一个<code>tar</code>包文件，<code>-f</code>用于指定创建的文件名，注意：文件名必须紧跟在 <code>-f</code>参数后。还可以加上<code>-v</code>参数以可视的方式输出打包文件。上面会自动取掉表示绝对路径的<code>/</code>，你也可以使用<code>-P</code>保留绝对路径符。</p>
<p>解包一个文件(<code>-x</code>参数)到指定路径的已存在目录(<code>-C</code>参数)：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>mkdir tardir</div><div class="line"><span class="variable">$ </span>tar -xf lijianan.tar -C tardir</div></pre></td></tr></table></figure>
<p>只查看不解包<code>-t</code>参数：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>tar -tf lijianan.tar</div></pre></td></tr></table></figure>
<p>保留文件属性和跟随链接（符号链接或软连接），有时候我们使用<code>tar</code>备份文档当你在其它主机还原时希望保留文件的属性(<code>-p</code>参数)和备份链接指向的源文件而不是链接本身(<code>-h</code>参数)</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tar -cphf etc<span class="selector-class">.tar</span> /etc</div></pre></td></tr></table></figure>
<p>对于创建不同的压缩格式文件，对于<code>tar</code>来说时相当简单的，需要的只是换一个参数，这里我们使用<code>gzip</code>工具创建<code>*.tar.gz</code>文件为例来说明。</p>
<p>我们只需要在创建<code>tar</code>文件的基础上添加<code>-z</code>参数，使用<code>gzip</code>来压缩文件：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tar -czf lijianan<span class="selector-class">.tar</span><span class="selector-class">.gz</span></div></pre></td></tr></table></figure>
<p>解压<code>*.tar.gz</code>文件：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tar -xzf lijianan<span class="selector-class">.tar</span><span class="selector-class">.gz</span></div></pre></td></tr></table></figure>
<p>现在外面要使用其它的压缩工具创建或解压相应的文件只需要更改一个参数即可：</p>
<table>
<thead>
<tr>
<th style="text-align:center">压缩文件格式</th>
<th style="text-align:left">参数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">*.tar.gz</td>
<td style="text-align:left">-z</td>
</tr>
<tr>
<td style="text-align:center">*.tar.xz</td>
<td style="text-align:left">-J</td>
</tr>
<tr>
<td style="text-align:center">*.tar.bz2</td>
<td style="text-align:left">-j</td>
</tr>
</tbody>
</table>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/05/09/Linux学习笔记（3）环境变量与文件查找/" itemprop="url">
                Linux学习笔记（3）环境变量与文件查找
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-05-09T19:06:55+08:00" content="2016-05-09">
            2016-05-09
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/linux/" itemprop="url" rel="index">
                  <span itemprop="name">linux</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/05/09/Linux学习笔记（3）环境变量与文件查找/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/09/Linux学习笔记（3）环境变量与文件查找/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="环境变量">环境变量</h2><h3 id="环境变量的声明">环境变量的声明</h3><p>变量是不用声明直接使用即可创建，创建一个指定类型的变量时，可以使用<code>declare</code>来声明变量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">declare</span> tmp</div><div class="line">tmp=dennylee1991</div><div class="line"><span class="built_in">echo</span> <span class="variable">$tmp</span></div></pre></td></tr></table></figure>
<h3 id="环境变量的原理及作用域">环境变量的原理及作用域</h3><p>shell的环境变量作用于自身和它的子进程。在unix和类unix系统当中，每个子进程都有其各自的环境变量设置，且默认情况下，<br>当一个进程被创建时，处理创建过程中明确指定的话，它将继承其父进程的绝大部分环境设置。</p>
<p>shell程序也作为一个进程运行在操作系统之上，而我们在shell中运行的大部分命令都将以shell的子进程的方式运行。</p>
<p>以下三个命令用于打印相关环境变量，区别在于涉及的是不同范围的环境变量</p>
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">set</td>
<td style="text-align:left">显示当前shell所有环境变量，包括其内建环境变量，用户自定义变量，以及导出的环境变量</td>
</tr>
<tr>
<td style="text-align:left">env</td>
<td style="text-align:left">显示与当前用户相关的环境变量，还可以让命令在指定环境中运行</td>
</tr>
<tr>
<td style="text-align:left">export</td>
<td style="text-align:left">显示从shell中导出成环境变量的变量，也能通过它将自定义变量导出为环境变量</td>
</tr>
</tbody>
</table>
<p>简单的说 set 包涵 env 包涵 export</p>
<p>更直观的，可以使用<code>vimdiff</code>工具比较三者值的不同：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">temp=dannylee</div><div class="line"><span class="keyword">export</span> temp_env=dannylee</div><div class="line">env|sort&gt;env.txt</div><div class="line"><span class="keyword">export</span>|sort&gt;<span class="keyword">export</span>.txt</div><div class="line"><span class="built_in">set</span>|sort&gt;<span class="built_in">set</span>.txt</div></pre></td></tr></table></figure>
<p>上述操作将命令输出通过管道<code>|</code>使用<code>sort</code>命令排序，再重定向到对应文本文件中。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vimdiff env<span class="selector-class">.txt</span> export<span class="selector-class">.txt</span> set.txt</div></pre></td></tr></table></figure>
<p>使用<code>vimdiff</code>工具比较导出的几个文件的内容。</p>
<h3 id="将自己的脚本添加到环境变量－命令的查找路径与顺序">将自己的脚本添加到环境变量－命令的查找路径与顺序</h3><p><code>shell</code>中之所以能执行命令，是通过环境变量<code>PATH</code>来进行搜索的。</p>
<p>当我们在<code>shell</code>中执行一个命令时，系统就会按照<code>PATH</code>中设定的路径按照顺序依次到目录中去查找，如果存在同名的命令，则执行先找到的那个。</p>
<p>接下来创建一个<code>shell</code>脚本以及<code>c</code>程序，并配置到环境变量中。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="keyword">vim</span> hello_shell.<span class="keyword">sh</span></div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/zsh</span></div><div class="line"></div><div class="line"><span class="keyword">for</span>((i=0; i&lt;10; i++));<span class="keyword">do</span></div><div class="line">	<span class="built_in">echo</span> <span class="string">"hello shell"</span></div><div class="line"><span class="keyword">done</span></div><div class="line"></div><div class="line"><span class="built_in">exit</span> 0</div></pre></td></tr></table></figure>
<p>为文件添加可执行权限:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>chmod <span class="number">755</span> hello_shell.sh</div></pre></td></tr></table></figure>
<p>创建一个c程序</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>vim hello_world.c</div></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"hello world!\n"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用<code>gcc</code>编译生成可执行文件：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>gcc -o hello_world hello_world.c</div></pre></td></tr></table></figure>
<p><code>gcc</code>生成二进制文件默认具有可执行权限，不需要更改权限。</p>
<p>在<code>home</code>目录下创建一个<code>mybin</code>目录，并且将上面两个可执行文件放入<code>mybin</code>中</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>mkdir mybin</div><div class="line"><span class="variable">$ </span>mv hello_shell.sh hello_world mybin/</div></pre></td></tr></table></figure>
<p>将可执行文件添加到环境变量中：</p>
<h4 id="方式1:">方式1:</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>PATH=<span class="variable">$PATH</span><span class="symbol">:/home/lijianan/mybin</span></div></pre></td></tr></table></figure>
<p>记得这里要写绝对路径。但是这种写法只在当前shell有效，一旦退出终端，就会失效。</p>
<h4 id="方式2:">方式2:</h4><p>每个用户的<code>home</code>目录中有一个<code>Shell</code>每次启动时会默认执行一个配置脚本，以初始化环境，包括添加一些用户自定义环境变量等待。<br><code>zsh</code>的配置文件是<code>.zshrc</code>,相应<code>bash</code>的配置文件为<code>.bashrc</code>。它们在<code>etc</code>下还都有一个或多个全局的配置文件，不过我们一般只修改用户目录下的配置文件。</p>
<p>我们可以简单的使用下面的命令直接添加内容到<code>.zshrc</code>中：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ echo <span class="string">"PATH=$PATH:/home/lijianan/mybin"</span> <span class="meta">&gt;&gt; </span>.zshrc</div></pre></td></tr></table></figure>
<p><strong>注意</strong>：上述命令中<code>&gt;&gt;</code>表示将标准输出以<strong>追加到</strong>的方式重定向到一个文件中，注意前面用到的<code>&gt;</code>是以<strong>覆盖到</strong>方式重定向到一个文件中，使用时要注意辨别。</p>
<h3 id="删除环境变量">删除环境变量</h3><p>删除变量可以使用<code>unset</code>命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">unset</span> temp</div></pre></td></tr></table></figure>
<h3 id="让环境变量立刻生效">让环境变量立刻生效</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">source</span> .zshrc</div></pre></td></tr></table></figure>
<h2 id="搜索文件">搜索文件</h2><p>四个常用指令:</p>
<p>whereis, locate, which, find.</p>
<h3 id="wiereis">wiereis</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>whereis who</div></pre></td></tr></table></figure>
<p><code>whereis</code>只能搜索二进制文件<code>(-b)</code>，<code>man</code>帮助文件<code>(-m)</code>和源代码文件<code>(-s)</code>，如果想获得更全面的结果，需要使用<code>locate</code>命令</p>
<h3 id="locate">locate</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ locate <span class="meta-keyword">/etc/</span>sh</div></pre></td></tr></table></figure>
<p><code>locate</code>用来查找指定目录下的不同文件类型，如上所示查找<code>/etc</code>下所有以<code>sh</code>开头的文件<strong>（它不仅仅是在<code>etc</code>目录下查找，而且会递归子目录进行查找）</strong></p>
<p>查找<code>/usr/share/</code>下所有<code>jpg</code>文件：</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ locate <span class="regexp">/usr/share/</span><span class="string">\*.jpg</span></div></pre></td></tr></table></figure>
<h3 id="which">which</h3><p><code>which</code>只从<code>PATH</code>环境变量指定的路径中去搜索命令，是<code>shell</code>内建的一个命令。</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="keyword">which</span> <span class="keyword">man</span></div></pre></td></tr></table></figure>
<h3 id="find">find</h3><p><code>find</code>是最强大的了，不仅可以通过文件类型、文件名查找，而且可以根据文件的属性（如文件的时间戳，文件的权限等）进行搜索。</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">find</span> ~ -mtime <span class="number">0</span>	#列出用户<span class="built_in">home</span>目录中，当天（<span class="number">24</span>小时之内）有改动的文件</div><div class="line">$ <span class="built_in">find</span> ~ -newer /<span class="built_in">home</span>/shiyanlou/Code 	#列出用户<span class="built_in">home</span>目录下比Code文件夹新的文件</div></pre></td></tr></table></figure>
<h2 id="其他">其他</h2><p>运行“数字雨”</p>
<p><code>ubuntu</code>安装<code>cmatrix</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get <span class="keyword">update</span>;sudo aptget <span class="keyword">install</span> cmatrix</div></pre></td></tr></table></figure>
<p>运行</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cmatrix</div></pre></td></tr></table></figure></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/05/08/Linux学习笔记（2）用户管理，文件操作，权限管理/" itemprop="url">
                Linux学习笔记（2）用户管理，文件操作，权限管理
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-05-08T19:06:55+08:00" content="2016-05-08">
            2016-05-08
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/linux/" itemprop="url" rel="index">
                  <span itemprop="name">linux</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/05/08/Linux学习笔记（2）用户管理，文件操作，权限管理/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/08/Linux学习笔记（2）用户管理，文件操作，权限管理/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="用户管理">用户管理</h2><h3 id="who_命令">who 命令</h3><table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-a</td>
<td style="text-align:left">打印能打印的全部</td>
</tr>
<tr>
<td style="text-align:left">-d</td>
<td style="text-align:left">打印死掉的进程</td>
</tr>
<tr>
<td style="text-align:left">-m</td>
<td style="text-align:left">同am i，mom likes</td>
</tr>
<tr>
<td style="text-align:left">-q</td>
<td style="text-align:left">打印当前登陆用户数及用户名</td>
</tr>
<tr>
<td style="text-align:left">-u</td>
<td style="text-align:left">打印当前登录用户登录信息</td>
</tr>
<tr>
<td style="text-align:left">-r</td>
<td style="text-align:left">打印运行等级</td>
</tr>
</tbody>
</table>
<p>查看当前用户信息：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>who am i</div></pre></td></tr></table></figure>
<h3 id="创建用户">创建用户</h3><p>创建用户需要<code>root</code>权限，这里就需要用到<code>sudo</code>这个命令了，不过使用这个命令有两个大前提：<strong>一是你要知道当前登录用户的密码，二是当前用户必须在<code>sudo</code>用户组</strong>。</p>
<h3 id="su，su_-_与_sudo">su，su - 与 sudo</h3><table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">su [user]</td>
<td style="text-align:left">可以切换到用户user，执行时需要输入目标用户的密码。</td>
</tr>
<tr>
<td style="text-align:left">su - [user]</td>
<td style="text-align:left">也是切换用户，同时环境变量也会跟着改变成目标的环境变量。</td>
</tr>
<tr>
<td style="text-align:left">sudo [cmd]</td>
<td style="text-align:left">可以以特权级别运行cmd命令，需要当前用户属于sudo组，且需要输入当前用户密码。</td>
</tr>
</tbody>
</table>
<h3 id="查看用户组：">查看用户组：</h3><h4 id="方式1:">方式1:</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>groups lijianan</div></pre></td></tr></table></figure>
<p>可以看到冒号之前表示用户，冒号之后表示用户所在的组。如果新建用户时不指定用户组的话，默认会自动创建一个与用户名相同的用户组。</p>
<p>这里如果当前用户组不是sudo用户组，却也可以执行sudo命令，可以查看一下/etc/sudoers.d/目录下是否有lijianan文件，如果有，则给lijianan用户赋予了sudo权限。</p>
<h4 id="方式2:">方式2:</h4><p>查看/etc/group文件</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cat /etc/<span class="keyword">group</span> <span class="title">| sort</span></div></pre></td></tr></table></figure>
<p><code>/etc/group</code> 的内容包括用户组(Group)、用户组口令、GID及该用户组所包含的用户(User)，每个用户组一条记录。<br>格式如下：</p>
<p><code>group_name:password:GID:user_list</code></p>
<h3 id="将其它用户加入sudo用户组：">将其它用户加入sudo用户组：</h3><p>默认情况下新创建的用户是不具有root权限的，也不在sudo用户组，可以让其加入sudo用户组从而获取root权限。</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>su -l lilei</div><div class="line"><span class="variable">$ </span>sudo ls</div></pre></td></tr></table></figure>
<p>会提示lilei不在sudoers文件中，意思就是lilei不在sudo用户组中，至于<code>sudoers</code>文件(<code>/etc/sudoers</code>)你现在最好不要动它，操作不慎会导致比较麻烦的后果。</p>
<p>使用<code>usermod</code>命令可以为用户添加用户组，同样使用该命令你必须有<code>root</code>权限，你可以直接使用<code>root</code>用户为其它用户添加用户组，或者用其他已经在sudo用户组的用户使用<code>sudo</code>命令获取权限来执行该命令</p>
<p>这里我使用lijianan用户执行<code>sudo</code>命令将lilei添加到<code>sudo</code>用户组，让它也可以使用<code>sudo</code>命令获得<code>root</code>权限</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>su lijianan</div><div class="line"><span class="variable">$ </span>groups lilei</div><div class="line"><span class="variable">$ </span>sudo usermod -G sudo lilei</div><div class="line"><span class="variable">$ </span>groups lilei</div></pre></td></tr></table></figure>
<p>然后你再切换回lilei用户，现在就可以使用sudo获取root权限了。</p>
<h3 id="删除用户">删除用户</h3><p>删除用户是很简单的事：</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo deluser lilei --<span class="built_in">remove</span>-<span class="built_in">home</span></div></pre></td></tr></table></figure>
<h2 id="文件操作">文件操作</h2><h3 id="关于文件需要知道的事：">关于文件需要知道的事：</h3><ul>
<li>.代表当前目录</li>
<li>..代表父目录</li>
<li>目录也是一个文件</li>
<li>当前目录下的 . 文件就是当前目录 .. 文件就是父目录。</li>
<li>不过在linux下.开头的文件是隐藏文件</li>
</ul>
<h3 id="关于文件操作，需要记住的命令：">关于文件操作，需要记住的命令：</h3><table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">cd</td>
<td style="text-align:left">进入目录</td>
</tr>
<tr>
<td style="text-align:left">pwd</td>
<td style="text-align:left">获取当前路径</td>
</tr>
<tr>
<td style="text-align:left">touch</td>
<td style="text-align:left">新建空白文件／更新文件时间戳</td>
</tr>
<tr>
<td style="text-align:left">mkdir</td>
<td style="text-align:left">新建目录</td>
</tr>
<tr>
<td style="text-align:left">mkdir -p father/son/grandson</td>
<td style="text-align:left">创建多级目录</td>
</tr>
<tr>
<td style="text-align:left">cp test father/son/grandson</td>
<td style="text-align:left">复制文件到指定目录</td>
</tr>
<tr>
<td style="text-align:left">cp -r father family</td>
<td style="text-align:left">复制目录到指定目录</td>
</tr>
<tr>
<td style="text-align:left">rm test</td>
<td style="text-align:left">删除文件</td>
</tr>
<tr>
<td style="text-align:left">rm -f test</td>
<td style="text-align:left">删除一个文件（忽略提示,比如删除一个只有只读权限的文件）</td>
</tr>
<tr>
<td style="text-align:left">rm -r family</td>
<td style="text-align:left">删除一个目录1</td>
</tr>
<tr>
<td style="text-align:left">mv file1 Documents</td>
<td style="text-align:left">移动文件到指定目录</td>
</tr>
<tr>
<td style="text-align:left">mv file1 file2</td>
<td style="text-align:left">重命名文件</td>
</tr>
</tbody>
</table>
<h3 id="关于文件查看，需要记住的命令">关于文件查看，需要记住的命令</h3><table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">cat    file1</td>
<td style="text-align:left">查看文件</td>
</tr>
<tr>
<td style="text-align:left">tac    file1</td>
<td style="text-align:left">倒叙查看文件</td>
</tr>
<tr>
<td style="text-align:left">nl    file1</td>
<td style="text-align:left">查看文件并显示行号</td>
</tr>
<tr>
<td style="text-align:left">more file1</td>
<td style="text-align:left">分页查看文件，Enter向下滚动一行，Space向下滚动一屏，h帮助，q退出</td>
</tr>
<tr>
<td style="text-align:left">head file1</td>
<td style="text-align:left">查看文件前10行</td>
</tr>
<tr>
<td style="text-align:left">tail -n 1 file1</td>
<td style="text-align:left">查看文件第一行</td>
</tr>
<tr>
<td style="text-align:left">tail</td>
<td style="text-align:left">还可以根据参数-f 实现不停地读取某个文件内容并且显示，可以实现日志监控功能。</td>
</tr>
<tr>
<td style="text-align:left">file /bin/ls</td>
<td style="text-align:left">查看文件类型</td>
</tr>
</tbody>
</table>
<h2 id="权限管理">权限管理</h2><h3 id="文件的属性">文件的属性</h3><p>查看文件权限，使用较长的格式列出文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ls <span class="_">-l</span></div></pre></td></tr></table></figure>
<p>从左往右依次列出了 <strong>文件类型</strong>和<strong>权限</strong>，<strong>链接数*</strong>，<strong>*所有者</strong>，<strong>所有用户组</strong>，<strong>文件大小</strong>，<strong>最后修改时间</strong>，<strong>文件名</strong></p>
<p>首先来说说文件类型和权限：</p>
<p>表示文件类型：</p>
<table>
<thead>
<tr>
<th style="text-align:center">字符</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">d</td>
<td style="text-align:left">目录</td>
</tr>
<tr>
<td style="text-align:center">l</td>
<td style="text-align:left">软链接，类似windows的快捷方式</td>
</tr>
<tr>
<td style="text-align:center">b</td>
<td style="text-align:left">块设备</td>
</tr>
<tr>
<td style="text-align:center">c</td>
<td style="text-align:left">字符设备</td>
</tr>
<tr>
<td style="text-align:center">s</td>
<td style="text-align:left">socket</td>
</tr>
<tr>
<td style="text-align:center">p</td>
<td style="text-align:left">管道</td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:left">普通文件</td>
</tr>
</tbody>
</table>
<p>表示权限：</p>
<table>
<thead>
<tr>
<th style="text-align:center">字符</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">r</td>
<td style="text-align:left">表示允许读权限</td>
</tr>
<tr>
<td style="text-align:center">w</td>
<td style="text-align:left">表示允许写权限</td>
</tr>
<tr>
<td style="text-align:center">x</td>
<td style="text-align:left">表示允许执行权限</td>
</tr>
</tbody>
</table>
<p>表示文件类型和权限的字段，第一位代表文件类型，2到4位表示拥有者权限，5到7位表示所属用户组权限，8到10位表示其他用户权限。</p>
<blockquote>
<p><strong>关于文件权限</strong></p>
<p>一个目录要同时具有读权限和执行权限才可以打开，而一个目录要有写权限才允许在其中创建其他文件，这是因为目录文件实际保存着该目录里面的文件等列表等信息。</p>
<p><strong>链接数</strong></p>
<p>链接到该文件所在的inode结点的文件名数目</p>
</blockquote>
<h3 id="ls常用命令">ls常用命令</h3><p>显示隐藏文件：</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ls -<span class="keyword">A</span></div></pre></td></tr></table></figure>
<p>查看某一个目录的完整属性，而不是现实目录里面的文件属性    </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ls -<span class="selector-tag">dl</span> &lt;目录名&gt;</div></pre></td></tr></table></figure>
<p>现实所有文件大小，并以普通人类能看懂的方式显示：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>ls -AsSh</div></pre></td></tr></table></figure>
<p>其中s为显示文件大小，S为按文件大小排序。</p>
<h3 id="改变文件的所有者">改变文件的所有者</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo chown <span class="tag">&lt;<span class="name">用户名</span>&gt;</span> <span class="tag">&lt;<span class="name">文件名</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="修改文件权限">修改文件权限</h3><h4 id="方式1:_二进制数字表示">方式1: 二进制数字表示</h4><p><code>2^0 (1)</code>代表可执行权限，<code>2^1 (2)</code>代表可写权限, <code>2^2 (4)</code>代表可读权限。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ chmod 700 <span class="tag">&lt;<span class="name">文件名</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="方式2:_加减赋值操作">方式2: 加减赋值操作</h4><p><code>&#39;g&#39;</code>,<code>&#39;o&#39;</code>还有<code>&#39;u&#39;</code>，分别表示<code>group</code>，<code>others</code>，<code>user</code>,<code>&#39;+&#39;</code>，<code>&#39;-&#39;</code>就分别表示增加和去掉相应的权限。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ chmod go-rw <span class="tag">&lt;<span class="name">文件名</span>&gt;</span></div></pre></td></tr></table></figure>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/05/08/Linux学习笔记（1）基本操作/" itemprop="url">
                Linux学习笔记（1）基本操作
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-05-08T18:06:55+08:00" content="2016-05-08">
            2016-05-08
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/linux/" itemprop="url" rel="index">
                  <span itemprop="name">linux</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/05/08/Linux学习笔记（1）基本操作/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/08/Linux学习笔记（1）基本操作/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="常用快捷键">常用快捷键</h2><table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ctrl + c</td>
<td style="text-align:left">结束当前程序</td>
</tr>
<tr>
<td style="text-align:left">ctrl + d</td>
<td style="text-align:left">键盘输入结束或退出终端</td>
</tr>
<tr>
<td style="text-align:left">ctrl + s</td>
<td style="text-align:left">暂停当前程序，暂停后按下任意键恢复运行</td>
</tr>
<tr>
<td style="text-align:left">ctrl + z</td>
<td style="text-align:left">将当前程序放到后台运行，恢复到前台的命令fg</td>
</tr>
<tr>
<td style="text-align:left">ctrl + a</td>
<td style="text-align:left">将光标移至输入行头，相当于Home键</td>
</tr>
<tr>
<td style="text-align:left">ctrl + e</td>
<td style="text-align:left">将光标移至输入行末，相当于End键</td>
</tr>
<tr>
<td style="text-align:left">ctrl + k</td>
<td style="text-align:left">删除从光标所在位置到行末</td>
</tr>
<tr>
<td style="text-align:left">Alt + Backspace</td>
<td style="text-align:left">向前删除一个单词</td>
</tr>
<tr>
<td style="text-align:left">Shift + pgUp</td>
<td style="text-align:left">将终端显示向上滚动</td>
</tr>
<tr>
<td style="text-align:left">Shift + PgDn</td>
<td style="text-align:left">将终端显示向下滚动</td>
</tr>
</tbody>
</table>
<h2 id="使用通配符">使用通配符</h2><p>shell常用通配符：</p>
<table>
<thead>
<tr>
<th style="text-align:left">字符</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">匹配0或多个字符</td>
</tr>
<tr>
<td style="text-align:left">?</td>
<td style="text-align:left">匹配任意一个字符</td>
</tr>
<tr>
<td style="text-align:left">[list]</td>
<td style="text-align:left">匹配list中的任意单一字符</td>
</tr>
<tr>
<td style="text-align:left">[!list]</td>
<td style="text-align:left">匹配 除list 中的任意单一字符以外的字符</td>
</tr>
<tr>
<td style="text-align:left">[c1-c2]</td>
<td style="text-align:left">匹配c1-c2中的任意单一字符 如：[0-9][a-z]</td>
</tr>
<tr>
<td style="text-align:left">{string1,string2,…}</td>
<td style="text-align:left">匹配string1或string2（或更多）其一字符串</td>
</tr>
<tr>
<td style="text-align:left">{c1..c2}</td>
<td style="text-align:left">匹配c1-c2中全部字符如{1..10}</td>
</tr>
</tbody>
</table>
<p>通过通配符创建十个文件：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="section">touch</span> love_&#123;<span class="number">1.</span><span class="number">.10</span>&#125;_linux.txt</div></pre></td></tr></table></figure>
<h2 id="使用man命令来查看帮助文档">使用man命令来查看帮助文档</h2><p>不再赘述</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/">&laquo;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/9/">&raquo;</a>
  </nav>

 </div>

        

        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://dannylee1991.github.io/images/avatar.jpg" alt="DannyLee佳楠" itemprop="image"/>
          <p class="site-author-name" itemprop="name">DannyLee佳楠</p>
        </div>
        <p class="site-description motion-element" itemprop="description">一只在迈向机器学习道路上狂奔的程序猿.</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">111</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">16</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">19</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/DannyLee1991" target="_blank">GitHub</a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DannyLee佳楠</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"dannylee1991"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     
  	<script src="/js/ua-parser.min.js"></script>
  	<script src="/js/hook-duoshuo.js"></script>
  

    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>
